import{j as e,Q as re,y as ne,W as le,d as ie,Y as ce,Z as E,_ as L,$ as oe}from"./ui-vendor-B2pFoMNi.js";import{a as r,h as de,L as R}from"./react-vendor-C7H4r9IR.js";import{h as he,B as o,C as xe,b as me,I as pe,d as ue,A as je,f as ge,g as fe,D as ve,i as Se,j as Ne,k as i}from"./index-DyoA978M.js";import{B as P}from"./badge-DN3GUanR.js";import{A as x,a as m,b as p,c as u,d as j,e as g,f,g as v}from"./alert-dialog-BRxXeYiA.js";import{f as be,d as we,u as ye}from"./salons-B0SwCEqs.js";import"./db-vendor-BXl3LOEh.js";import"./data-vendor-CIeUuS6O.js";import"./charts-vendor-BwF8VYvl.js";const De={active:"bg-green-100 text-green-800",pending:"bg-yellow-100 text-yellow-800",suspended:"bg-red-100 text-red-800"},Ce={Basic:"bg-gray-100 text-gray-800",Standard:"bg-blue-100 text-blue-800",Premium:"bg-purple-100 text-purple-800"};function Be(){const[F,b]=r.useState([]),[c,M]=r.useState(""),[l,S]=r.useState("all"),[B,w]=r.useState(!1),[z,y]=r.useState(!1),[I,D]=r.useState(!1),[$,C]=r.useState(!1),[H,A]=r.useState(!1),[a,n]=r.useState(null),[q,O]=r.useState(!0),{toast:d}=he(),Q=de(),T=new URLSearchParams(Q.search).get("ownerId");r.useEffect(()=>{U()},[l,c]);const U=async()=>{try{O(!0);const s={};l!=="all"&&(s.status=l),c&&(s.search=c),T&&(s.ownerId=T);const t=await be(s);b(t.salons)}catch(s){console.error("Error loading salons:",s),d({title:"Error",description:"Failed to load salons. Please try again.",variant:"destructive"})}finally{O(!1)}},V=F.filter(s=>{const t=s.name.toLowerCase().includes(c.toLowerCase())||s.location.toLowerCase().includes(c.toLowerCase()),h=l==="all"||s.status===l;return t&&h}),N=async(s,t)=>{try{await ye(s.toString(),t),b(ae=>ae.map(k=>k.id===s?{...k,status:t}:k)),d({title:"Status updated",description:{active:"Salon has been reactivated",suspended:"Salon has been suspended",pending:"Salon status updated to pending"}[t]})}catch{d({title:"Error",description:"Failed to update salon status. Please try again.",variant:"destructive"})}},W=async s=>{try{await we(s.toString()),b(t=>t.filter(h=>h.id!==s)),d({title:"Salon deleted",description:"The salon has been permanently removed from the platform."})}catch{d({title:"Error",description:"Failed to delete salon. Please try again.",variant:"destructive"})}},X=s=>{n(s),w(!0)},Y=s=>{n(s),y(!0)},Z=s=>{n(s),D(!0)},_=s=>{n(s),C(!0)},G=s=>{n(s),A(!0)},J=()=>{a&&(W(a.id),w(!1),n(null))},K=()=>{a&&(N(a.id,"suspended"),y(!1),n(null))},ee=()=>{a&&(N(a.id,"active"),D(!1),n(null))},se=()=>{a&&(N(a.id,"active"),C(!1),n(null))},te=()=>{a&&(N(a.id,"suspended"),A(!1),n(null))};return q?e.jsx("div",{className:"min-h-screen flex items-center justify-center",children:e.jsx("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-purple-600"})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Salon Management"}),e.jsx("p",{className:"text-gray-600",children:"Manage registered salons and their subscriptions"})]}),e.jsx(R,{to:"/dashboard/salons/new",children:e.jsxs(o,{className:"bg-gradient-to-r from-purple-600 to-pink-600 hover:from-purple-700 hover:to-pink-700",children:[e.jsx(re,{className:"h-4 w-4 mr-2"}),"Add New Salon"]})})]}),e.jsxs(xe,{className:"border-0 shadow-sm",children:[e.jsx(me,{children:e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-between",children:[e.jsxs("div",{className:"relative flex-1 max-w-md",children:[e.jsx(ne,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx(pe,{placeholder:"Search salons...",value:c,onChange:s=>M(s.target.value),className:"pl-10"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(o,{variant:l==="all"?"default":"outline",onClick:()=>S("all"),size:"sm",children:"All"}),e.jsx(o,{variant:l==="active"?"default":"outline",onClick:()=>S("active"),size:"sm",children:"Active"}),e.jsx(o,{variant:l==="pending"?"default":"outline",onClick:()=>S("pending"),size:"sm",children:"Pending"}),e.jsx(o,{variant:l==="suspended"?"default":"outline",onClick:()=>S("suspended"),size:"sm",children:"Suspended"})]})]})}),e.jsx(ue,{children:e.jsx("div",{className:"space-y-4",children:V.map(s=>e.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg hover:bg-gray-50 transition-colors",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs(je,{className:"h-12 w-12",children:[e.jsx(ge,{src:s.avatar,alt:s.name}),e.jsx(fe,{children:s.name.split(" ").map(t=>t[0]).join("")})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-900",children:s.name}),e.jsx("p",{className:"text-sm text-gray-600",children:s.location}),e.jsx("p",{className:"text-xs text-gray-500",children:s.email})]})]}),e.jsxs("div",{className:"flex items-center space-x-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-sm font-semibold text-gray-900",children:s.revenue}),e.jsx("p",{className:"text-xs text-gray-500",children:"Revenue"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-sm font-semibold text-gray-900",children:s.bookings}),e.jsx("p",{className:"text-xs text-gray-500",children:"Bookings"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-sm font-semibold text-gray-900",children:s.rating>0?`â˜… ${s.rating}`:"N/A"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Rating"})]}),e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsx(P,{className:De[s.status],children:s.status}),e.jsx(P,{className:Ce[s.subscription],children:s.subscription})]}),e.jsxs(ve,{children:[e.jsx(Se,{asChild:!0,children:e.jsx(o,{variant:"ghost",size:"icon",children:e.jsx(le,{className:"h-4 w-4"})})}),e.jsxs(Ne,{align:"end",children:[e.jsx(i,{asChild:!0,children:e.jsxs(R,{to:`/dashboard/salons/${s.id}`,className:"flex items-center w-full",children:[e.jsx(ie,{className:"mr-2 h-4 w-4"}),"View Details"]})}),e.jsx(i,{asChild:!0,children:e.jsxs(R,{to:`/dashboard/salons/${s.id}/edit`,className:"flex items-center w-full",children:[e.jsx(ce,{className:"mr-2 h-4 w-4"}),"Edit"]})}),s.status==="pending"&&e.jsxs(e.Fragment,{children:[e.jsxs(i,{className:"text-green-600 cursor-pointer",onSelect:t=>{t.preventDefault(),_(s)},children:[e.jsx(E,{className:"mr-2 h-4 w-4"}),"Approve"]}),e.jsxs(i,{className:"text-red-600 cursor-pointer",onSelect:t=>{t.preventDefault(),G(s)},children:[e.jsx(L,{className:"mr-2 h-4 w-4"}),"Reject"]})]}),s.status==="active"&&e.jsxs(i,{className:"text-red-600 cursor-pointer",onSelect:t=>{t.preventDefault(),Y(s)},children:[e.jsx(L,{className:"mr-2 h-4 w-4"}),"Suspend"]}),s.status==="suspended"&&e.jsxs(i,{className:"text-green-600 cursor-pointer",onSelect:t=>{t.preventDefault(),Z(s)},children:[e.jsx(E,{className:"mr-2 h-4 w-4"}),"Reactivate"]}),e.jsxs(i,{className:"text-red-600 cursor-pointer",onSelect:t=>{t.preventDefault(),X(s)},children:[e.jsx(oe,{className:"mr-2 h-4 w-4"}),"Delete"]})]})]})]})]},s.id))})})]}),e.jsx(x,{open:B,onOpenChange:w,children:e.jsxs(m,{children:[e.jsxs(p,{children:[e.jsx(u,{children:"Delete Salon"}),e.jsxs(j,{children:['Are you sure you want to delete "',a?.name,'"? This action cannot be undone and will permanently remove the salon from the platform.']})]}),e.jsxs(g,{children:[e.jsx(f,{children:"Cancel"}),e.jsx(v,{onClick:J,className:"bg-red-600 hover:bg-red-700",children:"Delete Salon"})]})]})}),e.jsx(x,{open:z,onOpenChange:y,children:e.jsxs(m,{children:[e.jsxs(p,{children:[e.jsx(u,{children:"Suspend Salon"}),e.jsxs(j,{children:['Are you sure you want to suspend "',a?.name,'"? This will temporarily disable their access to the platform and hide them from customer searches.']})]}),e.jsxs(g,{children:[e.jsx(f,{children:"Cancel"}),e.jsx(v,{onClick:K,className:"bg-red-600 hover:bg-red-700",children:"Suspend Salon"})]})]})}),e.jsx(x,{open:I,onOpenChange:D,children:e.jsxs(m,{children:[e.jsxs(p,{children:[e.jsx(u,{children:"Reactivate Salon"}),e.jsxs(j,{children:['Are you sure you want to reactivate "',a?.name,'"? This will restore their access to the platform and make them visible to customers again.']})]}),e.jsxs(g,{children:[e.jsx(f,{children:"Cancel"}),e.jsx(v,{onClick:ee,className:"bg-green-600 hover:bg-green-700",children:"Reactivate Salon"})]})]})}),e.jsx(x,{open:$,onOpenChange:C,children:e.jsxs(m,{children:[e.jsxs(p,{children:[e.jsx(u,{children:"Approve Salon"}),e.jsxs(j,{children:['Are you sure you want to approve "',a?.name,'"? This will activate their account and allow them to start accepting bookings.']})]}),e.jsxs(g,{children:[e.jsx(f,{children:"Cancel"}),e.jsx(v,{onClick:se,className:"bg-green-600 hover:bg-green-700",children:"Approve Salon"})]})]})}),e.jsx(x,{open:H,onOpenChange:A,children:e.jsxs(m,{children:[e.jsxs(p,{children:[e.jsx(u,{children:"Reject Salon"}),e.jsxs(j,{children:['Are you sure you want to reject "',a?.name,'"? This will suspend their account and prevent them from accessing the platform.']})]}),e.jsxs(g,{children:[e.jsx(f,{children:"Cancel"}),e.jsx(v,{onClick:te,className:"bg-red-600 hover:bg-red-700",children:"Reject Salon"})]})]})})]})}export{Be as default};
