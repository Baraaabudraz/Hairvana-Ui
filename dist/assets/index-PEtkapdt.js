import{j as e,a3 as W,ad as P,a1 as X,Z as S,g as ee,i as A,aa as se,ab as ae,E as re,d as E,aK as te,h as ie,ba as U,a9 as le,Y as ne,z as oe,ac as ce}from"./ui-vendor-B2pFoMNi.js";import{a as h}from"./react-vendor-C7H4r9IR.js";import{u as T,b as B,s as i}from"./data-vendor-CIeUuS6O.js";import{u as de,h as me,C as l,d as n,A as F,f as z,g as k,b as f,c as w,e as N,L as t,I as o,B as u,t as L,n as xe}from"./index-DHCScZ-8.js";import{B as Y}from"./badge-C_Aht46l.js";import{f as he,i as pe}from"./settings-CsfwURgA.js";import"./db-vendor-BXl3LOEh.js";import"./charts-vendor-BwF8VYvl.js";const ue=B({name:i().min(2,"Name must be at least 2 characters"),email:i().email("Invalid email address"),phone:i().min(10,"Phone number must be at least 10 characters"),department:i().optional(),timezone:i(),language:i(),bio:i().optional()}),je=B({currentPassword:i().min(1,"Current password is required"),newPassword:i().min(8,"Password must be at least 8 characters"),confirmPassword:i()}).refine(s=>s.newPassword===s.confirmPassword,{message:"Passwords don't match",path:["confirmPassword"]});function Ae(){const{user:s,setUser:I}=de(),{toast:d}=me(),[j,g]=h.useState(!1),[p,_]=h.useState(!1),[v,M]=h.useState(""),[ge,R]=h.useState(null),[D,C]=h.useState(!0),{register:c,handleSubmit:G,formState:{errors:m},reset:b}=T({resolver:L(ue),defaultValues:{name:s?.name||"",email:s?.email||"",phone:"+1 (555) 123-4567",department:"Administration",timezone:"America/New_York",language:"en",bio:"Platform administrator with expertise in salon management systems."}}),{register:y,handleSubmit:J,formState:{errors:x},reset:q}=T({resolver:L(je)});h.useEffect(()=>{(async()=>{try{C(!0);const r=await he();R(r),r.profile&&b({name:r.profile.name||s?.name||"",email:r.profile.email||s?.email||"",phone:r.profile.phone||"+1 (555) 123-4567",department:r.profile.department||"Administration",timezone:r.profile.timezone||"America/New_York",language:r.profile.language||"en",bio:r.profile.bio||"Platform administrator with expertise in salon management systems."})}catch(r){console.error("Error loading user settings:",r),d({title:"Error",description:"Failed to load user settings. Using default values.",variant:"destructive"}),s&&b({name:s.name,email:s.email,phone:"+1 (555) 123-4567",department:"Administration",timezone:"America/New_York",language:"en",bio:"Platform administrator with expertise in salon management systems."})}finally{C(!1)}})()},[s,b,d]);const K=a=>{a.target.files?.[0]&&M("https://images.pexels.com/photos/220453/pexels-photo-220453.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&dpr=2")},V=async a=>{g(!0);try{await pe(a),s&&I({...s,name:a.name,email:a.email,avatar:v||s.avatar}),d({title:"Profile updated",description:"Your profile has been updated successfully."})}catch{d({title:"Error updating profile",description:"Please try again later.",variant:"destructive"})}finally{g(!1)}},H=async a=>{g(!0);try{if(!s)throw new Error("User not found");await xe(s.id,a.currentPassword,a.newPassword),d({title:"Password updated",description:"Your password has been changed successfully."}),q()}catch{d({title:"Error updating password",description:"Please try again later.",variant:"destructive"})}finally{g(!1)}},O=()=>{switch(s?.role){case"super_admin":return ce;case"admin":return A;default:return oe}},Z=()=>{switch(s?.role){case"super_admin":return"bg-purple-100 text-purple-800";case"admin":return"bg-blue-100 text-blue-800";default:return"bg-gray-100 text-gray-800"}},$=()=>{switch(s?.role){case"super_admin":return"Super Admin";case"admin":return"Admin";default:return"User"}},Q=O();return D?e.jsx("div",{className:"min-h-screen flex items-center justify-center",children:e.jsx("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-purple-600"})}):e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"flex justify-between items-center",children:e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Profile"}),e.jsx("p",{className:"text-gray-600",children:"Manage your personal account information and preferences"})]})}),e.jsx(l,{className:"border-0 shadow-sm",children:e.jsx(n,{className:"p-6",children:e.jsxs("div",{className:"flex items-center gap-6",children:[e.jsxs("div",{className:"relative",children:[e.jsxs(F,{className:"h-24 w-24",children:[e.jsx(z,{src:v||s?.avatar,alt:s?.name}),e.jsx(k,{className:"text-xl",children:s?.name?.split(" ").map(a=>a[0]).join("")||"A"})]}),e.jsx("div",{className:"absolute -bottom-2 -right-2 bg-white rounded-full p-1 shadow-md",children:e.jsx(Q,{className:"h-4 w-4 text-gray-600"})})]}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h2",{className:"text-2xl font-semibold text-gray-900",children:s?.name}),e.jsx("p",{className:"text-gray-600",children:s?.email}),e.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[e.jsx(Y,{className:Z(),children:$()}),e.jsx(Y,{variant:"outline",className:"bg-green-50 text-green-700",children:"Active"})]}),e.jsxs("div",{className:"flex items-center gap-4 mt-3 text-sm text-gray-600",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(W,{className:"h-4 w-4"}),"Joined January 2024"]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(P,{className:"h-4 w-4"}),"Last active 2 hours ago"]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(X,{className:"h-4 w-4"}),"New York, USA"]})]})]})]})})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[e.jsx(l,{className:"border-0 shadow-sm",children:e.jsx(n,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Login Sessions"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:"24"})]}),e.jsx(P,{className:"h-8 w-8 text-blue-500"})]})})}),e.jsx(l,{className:"border-0 shadow-sm",children:e.jsx(n,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Actions Today"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:"47"})]}),e.jsx(S,{className:"h-8 w-8 text-green-500"})]})})}),e.jsx(l,{className:"border-0 shadow-sm",children:e.jsx(n,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Notifications"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:"12"})]}),e.jsx(ee,{className:"h-8 w-8 text-orange-500"})]})})}),e.jsx(l,{className:"border-0 shadow-sm",children:e.jsx(n,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Security Score"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:"98%"})]}),e.jsx(A,{className:"h-8 w-8 text-purple-500"})]})})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs(l,{className:"border-0 shadow-sm",children:[e.jsxs(f,{children:[e.jsx(w,{children:"Personal Information"}),e.jsx(N,{children:"Update your personal details and contact information"})]}),e.jsx(n,{children:e.jsxs("form",{onSubmit:G(V),className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[e.jsxs(F,{className:"h-16 w-16",children:[e.jsx(z,{src:v||s?.avatar,alt:s?.name}),e.jsx(k,{className:"text-lg",children:s?.name?.split(" ").map(a=>a[0]).join("")||"A"})]}),e.jsxs("div",{children:[e.jsx(t,{htmlFor:"avatar",className:"cursor-pointer",children:e.jsxs("div",{className:"flex items-center gap-2 text-purple-600 hover:text-purple-700",children:[e.jsx(se,{className:"h-4 w-4"}),"Change Photo"]})}),e.jsx(o,{id:"avatar",type:"file",accept:"image/*",onChange:K,className:"hidden"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"JPG, PNG up to 2MB"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(t,{htmlFor:"name",children:"Full Name"}),e.jsx(o,{id:"name",...c("name")}),m.name&&e.jsx("p",{className:"text-sm text-red-500",children:m.name.message})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(t,{htmlFor:"email",children:"Email Address"}),e.jsx(o,{id:"email",type:"email",...c("email")}),m.email&&e.jsx("p",{className:"text-sm text-red-500",children:m.email.message})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(t,{htmlFor:"phone",children:"Phone Number"}),e.jsx(o,{id:"phone",...c("phone")}),m.phone&&e.jsx("p",{className:"text-sm text-red-500",children:m.phone.message})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(t,{htmlFor:"department",children:"Department"}),e.jsx(o,{id:"department",...c("department")})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(t,{htmlFor:"timezone",children:"Timezone"}),e.jsxs("select",{id:"timezone",...c("timezone"),className:"flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-sm shadow-sm transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring",children:[e.jsx("option",{value:"America/New_York",children:"Eastern Time (ET)"}),e.jsx("option",{value:"America/Chicago",children:"Central Time (CT)"}),e.jsx("option",{value:"America/Denver",children:"Mountain Time (MT)"}),e.jsx("option",{value:"America/Los_Angeles",children:"Pacific Time (PT)"}),e.jsx("option",{value:"UTC",children:"UTC"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(t,{htmlFor:"language",children:"Language"}),e.jsxs("select",{id:"language",...c("language"),className:"flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-sm shadow-sm transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring",children:[e.jsx("option",{value:"en",children:"English"}),e.jsx("option",{value:"es",children:"Spanish"}),e.jsx("option",{value:"fr",children:"French"}),e.jsx("option",{value:"de",children:"German"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(t,{htmlFor:"bio",children:"Bio"}),e.jsx("textarea",{id:"bio",rows:3,...c("bio"),className:"flex w-full rounded-md border border-input bg-transparent px-3 py-2 text-sm shadow-sm placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring",placeholder:"Tell us about yourself..."})]}),e.jsx("div",{className:"flex justify-end",children:e.jsxs(u,{type:"submit",disabled:j,className:"bg-purple-600 hover:bg-purple-700",children:[e.jsx(ae,{className:"h-4 w-4 mr-2"}),j?"Saving...":"Save Changes"]})})]})})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs(l,{className:"border-0 shadow-sm",children:[e.jsxs(f,{children:[e.jsx(w,{children:"Change Password"}),e.jsx(N,{children:"Update your password to keep your account secure"})]}),e.jsx(n,{children:e.jsxs("form",{onSubmit:J(H),className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(t,{htmlFor:"currentPassword",children:"Current Password"}),e.jsxs("div",{className:"relative",children:[e.jsx(o,{id:"currentPassword",type:p?"text":"password",placeholder:"Enter current password",...y("currentPassword")}),e.jsx("button",{type:"button",onClick:()=>_(!p),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-500 hover:text-gray-700",children:p?e.jsx(re,{className:"w-4 h-4"}):e.jsx(E,{className:"w-4 h-4"})})]}),x.currentPassword&&e.jsx("p",{className:"text-sm text-red-500",children:x.currentPassword.message})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(t,{htmlFor:"newPassword",children:"New Password"}),e.jsx(o,{id:"newPassword",type:p?"text":"password",placeholder:"Enter new password",...y("newPassword")}),x.newPassword&&e.jsx("p",{className:"text-sm text-red-500",children:x.newPassword.message})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(t,{htmlFor:"confirmPassword",children:"Confirm New Password"}),e.jsx(o,{id:"confirmPassword",type:p?"text":"password",placeholder:"Confirm new password",...y("confirmPassword")}),x.confirmPassword&&e.jsx("p",{className:"text-sm text-red-500",children:x.confirmPassword.message})]}),e.jsx("div",{className:"flex justify-end",children:e.jsxs(u,{type:"submit",variant:"outline",disabled:j,children:[e.jsx(te,{className:"h-4 w-4 mr-2"}),j?"Updating...":"Update Password"]})})]})})]}),e.jsxs(l,{className:"border-0 shadow-sm",children:[e.jsxs(f,{children:[e.jsx(w,{children:"Security Status"}),e.jsx(N,{children:"Your account security overview"})]}),e.jsxs(n,{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 bg-green-50 border border-green-200 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(S,{className:"h-5 w-5 text-green-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-green-900",children:"Two-Factor Authentication"}),e.jsx("p",{className:"text-sm text-green-700",children:"Enabled"})]})]}),e.jsxs(u,{variant:"outline",size:"sm",children:[e.jsx(ie,{className:"h-4 w-4 mr-2"}),"Manage"]})]}),e.jsxs("div",{className:"flex items-center justify-between p-4 bg-blue-50 border border-blue-200 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(U,{className:"h-5 w-5 text-blue-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-blue-900",children:"Login Sessions"}),e.jsx("p",{className:"text-sm text-blue-700",children:"3 active sessions"})]})]}),e.jsxs(u,{variant:"outline",size:"sm",children:[e.jsx(E,{className:"h-4 w-4 mr-2"}),"View All"]})]}),e.jsxs("div",{className:"flex items-center justify-between p-4 bg-yellow-50 border border-yellow-200 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(le,{className:"h-5 w-5 text-yellow-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-yellow-900",children:"Password Last Changed"}),e.jsx("p",{className:"text-sm text-yellow-700",children:"30 days ago"})]})]}),e.jsxs(u,{variant:"outline",size:"sm",children:[e.jsx(ne,{className:"h-4 w-4 mr-2"}),"Change"]})]})]})]})]})]}),e.jsxs(l,{className:"border-0 shadow-sm",children:[e.jsxs(f,{children:[e.jsx(w,{children:"Recent Activity"}),e.jsx(N,{children:"Your recent actions and system events"})]}),e.jsx(n,{children:e.jsx("div",{className:"space-y-4",children:[{action:"Updated salon approval status",time:"2 hours ago",type:"admin",icon:S,color:"text-green-600"},{action:"Generated monthly revenue report",time:"4 hours ago",type:"report",icon:P,color:"text-blue-600"},{action:"Modified user permissions",time:"1 day ago",type:"security",icon:A,color:"text-purple-600"},{action:"Logged in from new device",time:"2 days ago",type:"security",icon:U,color:"text-orange-600"}].map((a,r)=>e.jsxs("div",{className:"flex items-center gap-4 p-3 rounded-lg hover:bg-gray-50 transition-colors",children:[e.jsx("div",{className:`p-2 rounded-lg bg-gray-100 ${a.color}`,children:e.jsx(a.icon,{className:"h-4 w-4"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:a.action}),e.jsx("p",{className:"text-xs text-gray-500",children:a.time})]})]},r))})})]})]})}export{Ae as default};
