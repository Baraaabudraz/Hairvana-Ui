import{j as e,a0 as f,Q as v}from"./ui-vendor-B2pFoMNi.js";import{u as y,a as o,L as b}from"./react-vendor-C7H4r9IR.js";import{B as h,C as _,b as N,c as C,e as k,d as w,L as a,I as r}from"./index-DyoA978M.js";import{j as F}from"./subscriptions-Ck8TwpZN.js";import"./db-vendor-BXl3LOEh.js";import"./data-vendor-CIeUuS6O.js";import"./charts-vendor-BwF8VYvl.js";const A=()=>{const u=y(),[s,l]=o.useState({name:"",description:"",price:"",yearly_price:"",billing_period:"monthly",features:"",limits:{max_users:"",max_bookings:"",max_staff:"",max_locations:""},status:"active"}),[c,m]=o.useState(!1),[d,p]=o.useState(""),i=n=>{const{name:t,value:x}=n.target;if(t.startsWith("limits.")){const j=t.split(".")[1];l({...s,limits:{...s.limits,[j]:x}})}else l({...s,[t]:x})},g=async n=>{n.preventDefault(),m(!0),p("");try{await F({...s,price:parseFloat(s.price),yearly_price:parseFloat(s.yearly_price),features:s.features.split(",").map(t=>t.trim()),limits:{max_users:s.limits.max_users?parseInt(s.limits.max_users):void 0,max_bookings:s.limits.max_bookings?parseInt(s.limits.max_bookings):void 0,max_staff:s.limits.max_staff?parseInt(s.limits.max_staff):void 0,max_locations:s.limits.max_locations?parseInt(s.limits.max_locations):void 0}}),u("/dashboard/plans")}catch(t){p(t.message||"Error creating plan")}finally{m(!1)}};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(b,{to:"/dashboard/plans",children:e.jsx(h,{variant:"ghost",size:"icon",children:e.jsx(f,{className:"h-4 w-4"})})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Add New Plan"}),e.jsx("p",{className:"text-gray-600",children:"Create a new subscription plan for your platform"})]})]}),e.jsx("form",{onSubmit:g,className:"space-y-6",children:e.jsxs(_,{className:"border-0 shadow-sm",children:[e.jsxs(N,{children:[e.jsx(C,{children:"Plan Details"}),e.jsx(k,{children:"Enter the details for the new plan"})]}),e.jsxs(w,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(a,{htmlFor:"name",children:"Name *"}),e.jsx(r,{id:"name",name:"name",value:s.name,onChange:i,required:!0,placeholder:"Plan name"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(a,{htmlFor:"billing_period",children:"Billing Period *"}),e.jsxs("select",{id:"billing_period",name:"billing_period",value:s.billing_period,onChange:i,className:"w-full border rounded px-3 py-2",children:[e.jsx("option",{value:"monthly",children:"Monthly"}),e.jsx("option",{value:"yearly",children:"Yearly"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(a,{htmlFor:"price",children:"Monthly Price *"}),e.jsx(r,{id:"price",name:"price",type:"number",step:"0.01",value:s.price,onChange:i,required:!0,placeholder:"0.00"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(a,{htmlFor:"yearly_price",children:"Yearly Price *"}),e.jsx(r,{id:"yearly_price",name:"yearly_price",type:"number",step:"0.01",value:s.yearly_price,onChange:i,required:!0,placeholder:"0.00"})]}),e.jsxs("div",{className:"space-y-2 md:col-span-2",children:[e.jsx(a,{htmlFor:"description",children:"Description"}),e.jsx("textarea",{id:"description",name:"description",value:s.description,onChange:i,className:"w-full border rounded px-3 py-2 min-h-[80px]",placeholder:"Describe the plan"})]}),e.jsxs("div",{className:"space-y-2 md:col-span-2",children:[e.jsx(a,{htmlFor:"features",children:"Features (comma separated)"}),e.jsx(r,{id:"features",name:"features",value:s.features,onChange:i,placeholder:"e.g. Unlimited bookings, Priority support"})]}),e.jsxs("div",{className:"space-y-2 md:col-span-2",children:[e.jsx(a,{children:"Limits"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(a,{htmlFor:"limits.max_users",children:"Max Users"}),e.jsx(r,{id:"limits.max_users",name:"limits.max_users",type:"number",min:"0",value:s.limits.max_users,onChange:i,placeholder:"e.g. 10"})]}),e.jsxs("div",{children:[e.jsx(a,{htmlFor:"limits.max_bookings",children:"Max Bookings"}),e.jsx(r,{id:"limits.max_bookings",name:"limits.max_bookings",type:"number",min:"0",value:s.limits.max_bookings,onChange:i,placeholder:"e.g. 100"})]}),e.jsxs("div",{children:[e.jsx(a,{htmlFor:"limits.max_staff",children:"Max Staff"}),e.jsx(r,{id:"limits.max_staff",name:"limits.max_staff",type:"number",min:"0",value:s.limits.max_staff,onChange:i,placeholder:"e.g. 5"})]}),e.jsxs("div",{children:[e.jsx(a,{htmlFor:"limits.max_locations",children:"Max Locations"}),e.jsx(r,{id:"limits.max_locations",name:"limits.max_locations",type:"number",min:"0",value:s.limits.max_locations,onChange:i,placeholder:"e.g. 3"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(a,{htmlFor:"status",children:"Active"}),e.jsxs("div",{className:"flex items-center gap-3 mt-1",children:[e.jsx("button",{type:"button","aria-pressed":s.status==="active",onClick:()=>l({...s,status:s.status==="active"?"inactive":"active"}),className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-purple-500 ${s.status==="active"?"bg-gradient-to-r from-purple-600 to-pink-600":"bg-gray-300"}`,children:e.jsx("span",{className:`inline-block h-5 w-5 transform rounded-full bg-white shadow transition-transform duration-200 ${s.status==="active"?"translate-x-5":"translate-x-1"}`})}),e.jsx("span",{className:s.status==="active"?"text-green-600 font-semibold":"text-gray-400 font-semibold",children:s.status==="active"?"Active":"Inactive"})]})]})]}),d&&e.jsx("div",{className:"text-red-600 text-sm mt-2",children:d}),e.jsx("div",{className:"flex justify-end",children:e.jsx(h,{type:"submit",className:"bg-gradient-to-r from-purple-600 to-pink-600 hover:from-purple-700 hover:to-pink-700",disabled:c,children:c?e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"})," Creating..."]}):e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx(v,{className:"h-4 w-4"})," Create Plan"]})})})]})]})})]})};export{A as default};
