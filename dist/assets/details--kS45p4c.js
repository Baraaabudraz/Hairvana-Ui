import{j as e,a0 as _,Y as U,$ as P,a3 as h,ad as A,_ as v,Z as j,B as g,a4 as f,O as E,ae as H,z as y,a5 as $,a6 as F,i as k,ac as L,d as I,b as Z,a9 as z}from"./ui-vendor-B2pFoMNi.js";import{k as J,a as b,L as p}from"./react-vendor-C7H4r9IR.js";import{h as V,B as n,C as t,d as r,A as O,f as q,g as X,b as d,c as m}from"./index-DyoA978M.js";import{B as u}from"./badge-DN3GUanR.js";import{a as Y,u as G,d as K}from"./users-Bg4EtP47.js";import{b as Q,f as W}from"./charts-vendor-BwF8VYvl.js";import"./db-vendor-BXl3LOEh.js";import"./data-vendor-CIeUuS6O.js";const w=(i,c,s="N/A")=>{if(!i)return s;try{const l=new Date(i);return isNaN(l.getTime())?s:Q(l,c)}catch(l){return console.warn("Date formatting error:",l),s}},ee=(i,c,s="N/A")=>{if(!i)return s;try{const l=new Date(i);return isNaN(l.getTime())?s:W(l,c)}catch(l){return console.warn("Date distance formatting error:",l),s}},D={active:"bg-green-100 text-green-800",pending:"bg-yellow-100 text-yellow-800",suspended:"bg-red-100 text-red-800"},se={super_admin:"bg-purple-100 text-purple-800",admin:"bg-blue-100 text-blue-800",salon:"bg-green-100 text-green-800",user:"bg-gray-100 text-gray-800"},ae={Basic:"bg-gray-100 text-gray-800",Standard:"bg-blue-100 text-blue-800",Premium:"bg-purple-100 text-purple-800"},te={manage_salons:"Manage Salons",manage_users:"Manage Users",view_analytics:"View Analytics",manage_subscriptions:"Manage Subscriptions",manage_payments:"Manage Payments",manage_reports:"Manage Reports",manage_notifications:"Manage Notifications",manage_settings:"Manage Settings",full_access:"Full Access"};function he(){const i=J(),{toast:c}=V(),[s,l]=b.useState(null),[T,S]=b.useState(!0);b.useEffect(()=>{const a=async()=>{try{S(!0);try{const o=await Y(i.id);l(o)}catch(o){console.warn("API fetch failed, using mock data:",o);const C={1:{id:"1",name:"John Smith",email:"admin@hairvana.com",phone:"+1 (555) 123-4567",role:"admin",status:"active",joinDate:"2024-01-01",lastLogin:"2024-06-15T10:30:00Z",avatar:"https://images.pexels.com/photos/220453/pexels-photo-220453.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&dpr=2",permissions:["manage_salons","manage_users","view_analytics","manage_subscriptions"]},2:{id:"2",name:"Sarah Johnson",email:"superadmin@hairvana.com",phone:"+1 (555) 234-5678",role:"super_admin",status:"active",joinDate:"2024-01-01",lastLogin:"2024-06-15T09:15:00Z",avatar:"https://images.pexels.com/photos/774909/pexels-photo-774909.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&dpr=2",permissions:["full_access"]},3:{id:"3",name:"Maria Rodriguez",email:"maria@luxehair.com",phone:"+1 (555) 345-6789",role:"salon",status:"active",joinDate:"2024-01-15",lastLogin:"2024-06-15T14:20:00Z",avatar:"https://images.pexels.com/photos/415829/pexels-photo-415829.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&dpr=2",salons:[{id:"1",name:"Luxe Hair Studio",location:"Beverly Hills, CA",subscription:"Premium",bookingsCount:156,revenue:12450,status:"active"},{id:"4",name:"Luxe Hair Downtown",location:"Downtown LA, CA",subscription:"Standard",bookingsCount:89,revenue:7800,status:"active"}],totalSalons:2,totalRevenue:20250,totalBookings:245},4:{id:"4",name:"David Chen",email:"david@stylecuts.com",phone:"+1 (555) 456-7890",role:"salon",status:"active",joinDate:"2024-01-20",lastLogin:"2024-06-15T11:45:00Z",avatar:"https://images.pexels.com/photos/2379004/pexels-photo-2379004.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&dpr=2",salons:[{id:"2",name:"Style Cuts",location:"San Francisco, CA",subscription:"Standard",bookingsCount:98,revenue:8900,status:"active"}],totalSalons:1,totalRevenue:8900,totalBookings:98},5:{id:"5",name:"Lisa Thompson",email:"lisa.thompson@email.com",phone:"+1 (555) 567-8901",role:"user",status:"active",joinDate:"2024-02-01",lastLogin:"2024-06-15T15:30:00Z",avatar:"https://images.pexels.com/photos/1239291/pexels-photo-1239291.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&dpr=2",totalBookings:8,totalSpent:650,favoriteServices:["Haircut","Hair Styling"]},6:{id:"6",name:"Emily Davis",email:"emily.davis@email.com",phone:"+1 (555) 678-9012",role:"user",status:"active",joinDate:"2024-02-01",lastLogin:"2024-06-15T13:20:00Z",avatar:"https://images.pexels.com/photos/1130626/pexels-photo-1130626.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&dpr=2",totalBookings:12,totalSpent:850,favoriteServices:["Haircut","Hair Color","Hair Styling"]}}[i.id];if(C)l(C);else throw new Error("User not found")}}catch(o){console.error("Error fetching user:",o),c({title:"Error",description:"Failed to load user details. Please try again.",variant:"destructive"})}finally{S(!1)}};i.id&&a()},[i.id,c]);const x=async a=>{if(s)try{await G(s.id,a),l(N=>N?{...N,status:a}:null),c({title:"Status updated",description:{active:"User has been reactivated",pending:"User has been set to pending",suspended:"User has been suspended"}[a]})}catch{c({title:"Error",description:"Failed to update user status. Please try again.",variant:"destructive"})}},M=async()=>{if(s)try{await K(s.id),c({title:"User deleted",description:"The user has been permanently removed from the platform."}),window.location.href="/dashboard/users"}catch{c({title:"Error",description:"Failed to delete user. Please try again.",variant:"destructive"})}};if(T)return e.jsx("div",{className:"min-h-screen flex items-center justify-center",children:e.jsx("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-purple-600"})});if(!s)return e.jsx("div",{className:"min-h-screen flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"User not found"}),e.jsx("p",{className:"text-gray-600 mt-2",children:"The user you're looking for doesn't exist."}),e.jsx(p,{to:"/dashboard/users",children:e.jsx(n,{className:"mt-4",children:"Back to Users"})})]})});const R=a=>{switch(a){case"super_admin":return"Super Admin";case"admin":return"Admin";case"salon":return"Salon Owner";case"user":return"Customer";default:return a}},B=(()=>{switch(s.role){case"super_admin":return L;case"admin":return k;case"salon":return g;case"user":return y;default:return y}})();return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(p,{to:"/dashboard/users",children:e.jsx(n,{variant:"ghost",size:"icon",children:e.jsx(_,{className:"h-4 w-4"})})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:s.name}),e.jsx("p",{className:"text-gray-600",children:"User Details & Management"})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(p,{to:`/dashboard/users/${s.id}/edit`,children:e.jsxs(n,{variant:"outline",children:[e.jsx(U,{className:"h-4 w-4 mr-2"}),"Edit"]})}),e.jsxs(n,{variant:"outline",className:"text-red-600 hover:text-red-700",onClick:M,children:[e.jsx(P,{className:"h-4 w-4 mr-2"}),"Delete"]})]})]}),e.jsx(t,{className:"border-0 shadow-sm",children:e.jsx(r,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-6",children:[e.jsxs("div",{className:"relative",children:[e.jsxs(O,{className:"h-20 w-20",children:[e.jsx(q,{src:s.avatar,alt:s.name}),e.jsx(X,{className:"text-xl",children:s.name.split(" ").map(a=>a[0]).join("")})]}),e.jsx("div",{className:"absolute -bottom-2 -right-2 bg-white rounded-full p-1 shadow-md",children:e.jsx(B,{className:"h-4 w-4 text-gray-600"})})]}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-semibold text-gray-900",children:s.name}),e.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[e.jsx(u,{className:se[s.role],children:R(s.role)}),e.jsx(u,{className:D[s.status],children:s.status})]}),e.jsxs("div",{className:"flex items-center gap-4 mt-2 text-sm text-gray-600",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(h,{className:"h-4 w-4"}),"Joined ",w(s.joinDate,"MMM dd, yyyy")]}),s.lastLogin&&e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(A,{className:"h-4 w-4"}),"Last seen ",ee(s.lastLogin,{addSuffix:!0})]})]})]})]}),e.jsxs("div",{className:"flex gap-2",children:[s.status==="active"&&e.jsxs(n,{variant:"outline",className:"text-red-600 hover:text-red-700",onClick:()=>x("suspended"),children:[e.jsx(v,{className:"h-4 w-4 mr-2"}),"Suspend"]}),s.status==="suspended"&&e.jsxs(n,{className:"bg-green-600 hover:bg-green-700",onClick:()=>x("active"),children:[e.jsx(j,{className:"h-4 w-4 mr-2"}),"Reactivate"]})]})]})})}),s.role==="salon"&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[e.jsx(t,{className:"border-0 shadow-sm",children:e.jsx(r,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Salons"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:s.totalSalons||0})]}),e.jsx(g,{className:"h-8 w-8 text-blue-500"})]})})}),e.jsx(t,{className:"border-0 shadow-sm",children:e.jsx(r,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Revenue"}),e.jsxs("p",{className:"text-2xl font-bold text-gray-900",children:["$",s.totalRevenue?.toLocaleString()]})]}),e.jsx(f,{className:"h-8 w-8 text-green-500"})]})})}),e.jsx(t,{className:"border-0 shadow-sm",children:e.jsx(r,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Bookings"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:s.totalBookings})]}),e.jsx(h,{className:"h-8 w-8 text-blue-500"})]})})}),e.jsx(t,{className:"border-0 shadow-sm",children:e.jsx(r,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Avg Revenue/Salon"}),e.jsxs("p",{className:"text-2xl font-bold text-gray-900",children:["$",s.totalSalons?Math.round((s.totalRevenue||0)/s.totalSalons).toLocaleString():0]})]}),e.jsx(E,{className:"h-8 w-8 text-purple-500"})]})})})]}),s.role==="user"&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsx(t,{className:"border-0 shadow-sm",children:e.jsx(r,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Spent"}),e.jsxs("p",{className:"text-2xl font-bold text-gray-900",children:["$",s.totalSpent?.toLocaleString()]})]}),e.jsx(f,{className:"h-8 w-8 text-green-500"})]})})}),e.jsx(t,{className:"border-0 shadow-sm",children:e.jsx(r,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Bookings"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:s.totalBookings})]}),e.jsx(h,{className:"h-8 w-8 text-blue-500"})]})})}),e.jsx(t,{className:"border-0 shadow-sm",children:e.jsx(r,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Favorite Services"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:s.favoriteServices?.length||0})]}),e.jsx(H,{className:"h-8 w-8 text-pink-500"})]})})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs(t,{className:"border-0 shadow-sm",children:[e.jsx(d,{children:e.jsxs(m,{className:"flex items-center gap-2",children:[e.jsx(y,{className:"h-5 w-5"}),"Contact Information"]})}),e.jsxs(r,{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx($,{className:"h-4 w-4 text-gray-400"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",children:"Email"}),e.jsx("p",{className:"text-sm text-gray-600",children:s.email})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(F,{className:"h-4 w-4 text-gray-400"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",children:"Phone"}),e.jsx("p",{className:"text-sm text-gray-600",children:s.phone})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(h,{className:"h-4 w-4 text-gray-400"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",children:"Member Since"}),e.jsx("p",{className:"text-sm text-gray-600",children:w(s.joinDate,"MMMM dd, yyyy")})]})]}),s.lastLogin&&e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(A,{className:"h-4 w-4 text-gray-400"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",children:"Last Login"}),e.jsx("p",{className:"text-sm text-gray-600",children:w(s.lastLogin,"MMM dd, yyyy HH:mm")})]})]})]})]}),(s.role==="admin"||s.role==="super_admin")&&e.jsxs(t,{className:"border-0 shadow-sm",children:[e.jsx(d,{children:e.jsxs(m,{className:"flex items-center gap-2",children:[e.jsx(k,{className:"h-5 w-5"}),"Admin Permissions"]})}),e.jsx(r,{children:s.role==="super_admin"?e.jsxs("div",{className:"p-4 bg-purple-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(L,{className:"h-5 w-5 text-purple-600"}),e.jsx("span",{className:"font-semibold text-purple-900",children:"Full Administrative Access"})]}),e.jsx("p",{className:"text-sm text-purple-700 mt-1",children:"This user has complete control over all platform features and settings."})]}):e.jsx("div",{className:"space-y-2",children:s.permissions?.map(a=>e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(j,{className:"h-4 w-4 text-green-500"}),e.jsx("span",{className:"text-sm text-gray-700",children:te[a]||a})]},a))})})]}),s.role==="salon"&&e.jsxs(t,{className:"border-0 shadow-sm",children:[e.jsx(d,{children:e.jsxs(m,{className:"flex items-center gap-2",children:[e.jsx(g,{className:"h-5 w-5"}),"Salon Portfolio (",s.totalSalons," ",s.totalSalons===1?"Salon":"Salons",")"]})}),e.jsxs(r,{className:"space-y-4",children:[s.salons?.map(a=>e.jsx("div",{className:"p-4 border rounded-lg hover:bg-gray-50 transition-colors",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-gray-900",children:a.name}),e.jsx("p",{className:"text-sm text-gray-600",children:a.location}),e.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[e.jsx(u,{className:ae[a.subscription],children:a.subscription}),e.jsx(u,{className:D[a.status],children:a.status})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"text-sm font-semibold text-gray-900",children:["$",a.revenue.toLocaleString()]}),e.jsxs("p",{className:"text-xs text-gray-500",children:[a.bookingsCount," bookings"]}),e.jsx(p,{to:`/dashboard/salons/${a.id}`,children:e.jsxs(n,{variant:"outline",size:"sm",className:"mt-2",children:[e.jsx(I,{className:"h-3 w-3 mr-1"}),"View"]})})]})]})},a.id)),s.salons&&s.salons.length>0&&e.jsx("div",{className:"mt-4 pt-4 border-t",children:e.jsx(p,{to:`/dashboard/salons?ownerId=${s.id}`,children:e.jsxs(n,{variant:"outline",className:"w-full",children:[e.jsx(g,{className:"h-4 w-4 mr-2"}),"View All Salons (",s.totalSalons,")"]})})})]})]}),s.role==="user"&&e.jsxs(t,{className:"border-0 shadow-sm",children:[e.jsx(d,{children:e.jsxs(m,{className:"flex items-center gap-2",children:[e.jsx(Z,{className:"h-5 w-5"}),"Customer Information"]})}),e.jsxs(r,{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(f,{className:"h-4 w-4 text-gray-400"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",children:"Total Spent"}),e.jsxs("p",{className:"text-sm text-gray-600",children:["$",s.totalSpent?.toLocaleString()]})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(h,{className:"h-4 w-4 text-gray-400"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",children:"Total Bookings"}),e.jsx("p",{className:"text-sm text-gray-600",children:s.totalBookings})]})]}),s.favoriteServices&&s.favoriteServices.length>0&&e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium mb-2",children:"Favorite Services"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:s.favoriteServices.map(a=>e.jsx(u,{variant:"secondary",children:a},a))})]}),s.suspensionReason&&e.jsxs("div",{className:"p-3 bg-red-50 rounded-lg",children:[e.jsx("p",{className:"text-sm font-medium text-red-900",children:"Suspension Reason"}),e.jsx("p",{className:"text-sm text-red-700",children:s.suspensionReason})]})]})]})]}),s.status==="suspended"&&e.jsxs(t,{className:"border-0 shadow-sm border-red-200 bg-red-50",children:[e.jsx(d,{children:e.jsxs(m,{className:"flex items-center gap-2 text-red-900",children:[e.jsx(v,{className:"h-5 w-5"}),"Account Suspended"]})}),e.jsxs(r,{children:[e.jsxs("p",{className:"text-red-700",children:["This user account has been suspended and cannot access the platform.",s.suspensionReason&&` Reason: ${s.suspensionReason}`]}),e.jsx("div",{className:"mt-4",children:e.jsxs(n,{className:"bg-green-600 hover:bg-green-700",onClick:()=>x("active"),children:[e.jsx(j,{className:"h-4 w-4 mr-2"}),"Reactivate Account"]})})]})]}),s.status==="pending"&&e.jsxs(t,{className:"border-0 shadow-sm border-yellow-200 bg-yellow-50",children:[e.jsx(d,{children:e.jsxs(m,{className:"flex items-center gap-2 text-yellow-900",children:[e.jsx(z,{className:"h-5 w-5"}),"Account Pending Approval"]})}),e.jsxs(r,{children:[e.jsx("p",{className:"text-yellow-700",children:"This user account is pending approval and has limited access to the platform."}),e.jsxs("div",{className:"mt-4 flex gap-2",children:[e.jsxs(n,{className:"bg-green-600 hover:bg-green-700",onClick:()=>x("active"),children:[e.jsx(j,{className:"h-4 w-4 mr-2"}),"Approve Account"]}),e.jsxs(n,{variant:"outline",className:"text-red-600 hover:text-red-700",onClick:()=>x("suspended"),children:[e.jsx(v,{className:"h-4 w-4 mr-2"}),"Reject Account"]})]})]})]})]})}export{he as default};
