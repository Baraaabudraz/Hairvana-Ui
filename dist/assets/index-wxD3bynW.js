import{j as e,af as Ee,Q as Fe,C as se,Z as w,ag as ae,_ as O,a4 as Oe,ac as ie,a2 as Le,ah as ce,y as Te,a3 as Ye,W as Ie,d as Ue,B as ze,ai as le,aj as te,Y as Re}from"./ui-vendor-B2pFoMNi.js";import{a as r,L}from"./react-vendor-C7H4r9IR.js";import{h as Ve,B as n,C as u,d as j,b as re,c as _e,e as He,I as y,A as Ze,f as qe,g as Je,D as Ke,i as Qe,j as We,k as f,L as C}from"./index-DHCScZ-8.js";import{B as T}from"./badge-C_Aht46l.js";import{A as Xe,a as Ge,b as es,c as ss,d as as,e as ls,f as ts,g as rs}from"./alert-dialog-B6xWP7Af.js";import{D as Y,a as I,b as U,c as z,d as R,e as V}from"./dialog-CWP7-1N6.js";import{f as ns,a as is,u as ne,b as cs,s as ds,c as os}from"./subscriptions-Dpt9SgIW.js";import{b as ms}from"./charts-vendor-BwF8VYvl.js";import"./db-vendor-BXl3LOEh.js";import"./data-vendor-CIeUuS6O.js";const xs={active:"bg-green-100 text-green-800",trial:"bg-blue-100 text-blue-800",cancelled:"bg-red-100 text-red-800",past_due:"bg-yellow-100 text-yellow-800"},hs={Basic:"bg-gray-100 text-gray-800",Standard:"bg-blue-100 text-blue-800",Premium:"bg-purple-100 text-purple-800"},$={Basic:ce||(()=>e.jsx("span",{children:"âš¡"})),Standard:Le||(()=>e.jsx("span",{children:"â˜…"})),Premium:ie||(()=>e.jsx("span",{children:"ðŸ‘‘"}))};function Cs(){const[de,b]=r.useState([]),[E,oe]=r.useState([]),[me,_]=r.useState(!0),[H,Z]=r.useState(null),[v,xe]=r.useState({total:0,active:0,trial:0,cancelled:0,totalRevenue:0}),[he,q]=r.useState(!0),[g,pe]=r.useState(""),[m,S]=r.useState("all"),[x,P]=r.useState("all"),[ge,F]=r.useState(!1),[ue,D]=r.useState(!1),[je,k]=r.useState(!1),[Ne,M]=r.useState(!1),[l,h]=r.useState(null),[i,A]=r.useState(null),[o,N]=r.useState({cardNumber:"",expiryMonth:"",expiryYear:"",cvv:"",cardholderName:""}),{toast:d}=Ve();r.useEffect(()=>{ye()},[]);const ye=async()=>{try{_(!0),Z(null);const s=await ns();oe(s)}catch{Z("Failed to load plans"),d({title:"Error",description:"Failed to load subscription plans. Please try again.",variant:"destructive"})}finally{_(!1)}};r.useEffect(()=>{fe()},[m,x,g]);const fe=async()=>{try{q(!0);const s={};m!=="all"&&(s.status=m),x!=="all"&&(s.plan=x),g&&(s.search=g),s.includePlans=!0;const a=await is(s);b(a.subscriptions),xe(a.stats)}catch(s){console.error("Error loading subscriptions:",s),d({title:"Error",description:"Failed to load subscriptions. Please try again.",variant:"destructive"})}finally{q(!1)}},be=de.filter(s=>{const a=s.salonName.toLowerCase().includes(g.toLowerCase())||s.ownerName.toLowerCase().includes(g.toLowerCase())||s.ownerEmail.toLowerCase().includes(g.toLowerCase()),t=x==="all"||s.plan===x,c=m==="all"||s.status===m;return a&&t&&c}),ve=async s=>{try{await os(s),b(a=>a.map(t=>t.id===s?{...t,status:"cancelled"}:t)),d({title:"Subscription cancelled",description:"The subscription has been cancelled successfully."})}catch{d({title:"Error",description:"Failed to cancel subscription. Please try again.",variant:"destructive"})}},we=async()=>{if(!(!l||!i))try{await ne(l.id,{plan_id:i.id,amount:i.price}),b(s=>s.map(a=>a.id===l.id?{...a,plan:i.name,amount:i.price}:a)),d({title:"Plan upgraded successfully",description:`${l.salonName} has been upgraded to ${i.name} plan.`}),D(!1),h(null),A(null)}catch{d({title:"Error",description:"Failed to upgrade plan. Please try again.",variant:"destructive"})}},Ce=async()=>{if(!(!l||!i))try{await ne(l.id,{plan_id:i.id,amount:i.price}),b(s=>s.map(a=>a.id===l.id?{...a,plan:i.name,amount:i.price}:a)),d({title:"Plan downgraded successfully",description:`${l.salonName} has been downgraded to ${i.name} plan.`}),k(!1),h(null),A(null)}catch{d({title:"Error",description:"Failed to downgrade plan. Please try again.",variant:"destructive"})}},Se=async()=>{if(l)try{const s={type:"card",last4:o.cardNumber.slice(-4),brand:"Visa",expiryMonth:parseInt(o.expiryMonth),expiryYear:parseInt(o.expiryYear)};await cs(l.id,s),b(a=>a.map(t=>t.id===l.id?{...t,paymentMethod:s}:t)),d({title:"Payment method updated",description:"The payment method has been updated successfully."}),M(!1),h(null),N({cardNumber:"",expiryMonth:"",expiryYear:"",cvv:"",cardholderName:""})}catch{d({title:"Error",description:"Failed to update payment method. Please try again.",variant:"destructive"})}},Pe=async()=>{try{d({title:"Syncing billing data",description:"Please wait while we sync with the payment gateway..."}),await ds(),d({title:"Billing data synced",description:"Billing data has been synchronized successfully."})}catch{d({title:"Error",description:"Failed to sync billing data. Please try again.",variant:"destructive"})}},De=s=>{h(s),F(!0)},ke=s=>{h(s),D(!0)},Me=s=>{h(s),k(!0)},Ae=s=>{h(s),M(!0)},Be=()=>{l&&(ve(l.id),F(!1),h(null))},J=s=>{const a=["Basic","Standard","Premium"],t=a.indexOf(s);return E.filter(c=>a.indexOf(c.name)>t)},K=s=>{const a=["Basic","Standard","Premium"],t=a.indexOf(s);return E.filter(c=>a.indexOf(c.name)<t)},Q=(s,a)=>a==="unlimited"?0:Math.min(s/a*100,100),W=s=>s>=90?"bg-red-500":s>=75?"bg-yellow-500":"bg-green-500";return he?e.jsx("div",{className:"min-h-screen flex items-center justify-center",children:e.jsx("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-purple-600"})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Subscription Management"}),e.jsx("p",{className:"text-gray-600",children:"Manage salon subscriptions, billing, and plans"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(n,{variant:"outline",onClick:Pe,children:[e.jsx(Ee,{className:"h-4 w-4 mr-2"}),"Sync Billing"]}),e.jsx(L,{to:"/dashboard/subscriptions/new",children:e.jsxs(n,{className:"bg-gradient-to-r from-purple-600 to-pink-600 hover:from-purple-700 hover:to-pink-700",children:[e.jsx(Fe,{className:"h-4 w-4 mr-2"}),"Create Subscription"]})})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-6",children:[e.jsx(u,{className:"border-0 shadow-sm",children:e.jsx(j,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Subscriptions"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:v.total})]}),e.jsx(se,{className:"h-8 w-8 text-blue-500"})]})})}),e.jsx(u,{className:"border-0 shadow-sm",children:e.jsx(j,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Active"}),e.jsx("p",{className:"text-2xl font-bold text-green-600",children:v.active})]}),e.jsx(w,{className:"h-8 w-8 text-green-500"})]})})}),e.jsx(u,{className:"border-0 shadow-sm",children:e.jsx(j,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Trial"}),e.jsx("p",{className:"text-2xl font-bold text-blue-600",children:v.trial})]}),e.jsx(ae,{className:"h-8 w-8 text-blue-500"})]})})}),e.jsx(u,{className:"border-0 shadow-sm",children:e.jsx(j,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Cancelled"}),e.jsx("p",{className:"text-2xl font-bold text-red-600",children:v.cancelled})]}),e.jsx(O,{className:"h-8 w-8 text-red-500"})]})})}),e.jsx(u,{className:"border-0 shadow-sm",children:e.jsx(j,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Monthly Revenue"}),e.jsxs("p",{className:"text-2xl font-bold text-green-600",children:["$",v.totalRevenue.toFixed(2)]})]}),e.jsx(Oe,{className:"h-8 w-8 text-green-500"})]})})})]}),e.jsxs(u,{className:"border-0 shadow-sm",children:[e.jsxs(re,{children:[e.jsx(_e,{children:"Available Plans"}),e.jsx(He,{children:"Subscription plans available for salon owners"})]}),e.jsx(j,{children:me?e.jsx("div",{className:"min-h-[200px] flex items-center justify-center",children:e.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-b-2 border-purple-600"})}):H?e.jsx("div",{className:"min-h-[200px] flex items-center justify-center text-red-500",children:H}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:E.map(s=>{const a=$[s.name];return e.jsxs("div",{className:`relative p-6 rounded-lg border-2 ${s.popular?"border-purple-200 bg-purple-50":"border-gray-200 bg-white"}`,children:[s.popular&&e.jsx("div",{className:"absolute -top-3 left-1/2 transform -translate-x-1/2",children:e.jsx(T,{className:"bg-purple-600 text-white",children:"Most Popular"})}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"flex justify-center mb-4",children:e.jsx("div",{className:`p-3 rounded-lg bg-gradient-to-r ${s.name==="Basic"?"from-gray-600 to-gray-700":s.name==="Standard"?"from-blue-600 to-blue-700":"from-purple-600 to-purple-700"}`,children:a?e.jsx(a,{className:"h-6 w-6 text-white"}):e.jsx("span",{className:"h-6 w-6",children:"?"})})}),e.jsx("h3",{className:"text-xl font-bold text-gray-900",children:s.name}),e.jsx("p",{className:"text-gray-600 mt-2",children:s.description}),e.jsxs("div",{className:"mt-4",children:[e.jsxs("span",{className:"text-3xl font-bold text-gray-900",children:["$",s.price]}),e.jsx("span",{className:"text-gray-600",children:"/month"})]}),e.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:["or $",s.yearlyPrice,"/year (save $",(s.price*12-s.yearlyPrice).toFixed(2),")"]})]}),e.jsx("ul",{className:"mt-6 space-y-3",children:s.features.map((t,c)=>e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx(w,{className:"h-4 w-4 text-green-500"}),e.jsx("span",{className:"text-sm text-gray-700",children:t})]},c))})]},s.id)})})})]}),e.jsxs(u,{className:"border-0 shadow-sm",children:[e.jsx(re,{children:e.jsxs("div",{className:"flex flex-col lg:flex-row gap-4 justify-between",children:[e.jsxs("div",{className:"relative flex-1 max-w-md",children:[e.jsx(Te,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx(y,{placeholder:"Search subscriptions...",value:g,onChange:s=>pe(s.target.value),className:"pl-10"})]}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsx(n,{variant:m==="all"?"default":"outline",onClick:()=>S("all"),size:"sm",children:"All Status"}),e.jsxs(n,{variant:m==="active"?"default":"outline",onClick:()=>S("active"),size:"sm",children:[e.jsx(w,{className:"h-3 w-3 mr-1"}),"Active"]}),e.jsxs(n,{variant:m==="trial"?"default":"outline",onClick:()=>S("trial"),size:"sm",children:[e.jsx(ae,{className:"h-3 w-3 mr-1"}),"Trial"]}),e.jsxs(n,{variant:m==="cancelled"?"default":"outline",onClick:()=>S("cancelled"),size:"sm",children:[e.jsx(O,{className:"h-3 w-3 mr-1"}),"Cancelled"]}),e.jsx("div",{className:"w-px h-6 bg-gray-300 mx-2"}),e.jsx(n,{variant:x==="all"?"default":"outline",onClick:()=>P("all"),size:"sm",children:"All Plans"}),e.jsx(n,{variant:x==="Basic"?"default":"outline",onClick:()=>P("Basic"),size:"sm",children:"Basic"}),e.jsx(n,{variant:x==="Standard"?"default":"outline",onClick:()=>P("Standard"),size:"sm",children:"Standard"}),e.jsx(n,{variant:x==="Premium"?"default":"outline",onClick:()=>P("Premium"),size:"sm",children:"Premium"})]})]})}),e.jsx(j,{children:e.jsx("div",{className:"space-y-4",children:be.map(s=>{const a=$[s.plan],t=s.usage||{},c=t.bookings??0,p=t.bookingsLimit??"unlimited",X=t.staff??0,B=t.staffLimit??"unlimited",G=Q(c,p),ee=Q(X,B);return e.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg hover:bg-gray-50 transition-colors",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("div",{className:"relative",children:[e.jsxs(Ze,{className:"h-12 w-12",children:[e.jsx(qe,{src:"https://images.pexels.com/photos/3993449/pexels-photo-3993449.jpeg?auto=compress&cs=tinysrgb&w=100&h=100&dpr=2",alt:s.salonName}),e.jsx(Je,{children:s.salonName.split(" ").map($e=>$e[0]).join("")})]}),e.jsx("div",{className:"absolute -bottom-1 -right-1 bg-white rounded-full p-1",children:a?e.jsx(a,{className:"h-3 w-3 text-gray-600"}):e.jsx("span",{className:"h-3 w-3",children:"?"})})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-900",children:s.salonName}),e.jsx("p",{className:"text-sm text-gray-600",children:s.ownerName}),e.jsx("p",{className:"text-xs text-gray-500",children:s.ownerEmail}),e.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[e.jsx(Ye,{className:"h-3 w-3 text-gray-400"}),e.jsxs("span",{className:"text-xs text-gray-500",children:["Next billing: ",ms(new Date(s.nextBillingDate),"MMM dd, yyyy")]})]})]})]}),e.jsxs("div",{className:"flex items-center space-x-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsxs("p",{className:"text-sm font-semibold text-gray-900",children:[c,p!=="unlimited"&&`/${p}`]}),e.jsx("p",{className:"text-xs text-gray-500",children:"Bookings"}),p!=="unlimited"&&e.jsx("div",{className:"w-16 h-1 bg-gray-200 rounded-full mt-1",children:e.jsx("div",{className:`h-1 rounded-full ${W(G)}`,style:{width:`${G}%`}})})]}),e.jsxs("div",{className:"text-center",children:[e.jsxs("p",{className:"text-sm font-semibold text-gray-900",children:[X,B!=="unlimited"&&`/${B}`]}),e.jsx("p",{className:"text-xs text-gray-500",children:"Staff"}),B!=="unlimited"&&e.jsx("div",{className:"w-16 h-1 bg-gray-200 rounded-full mt-1",children:e.jsx("div",{className:`h-1 rounded-full ${W(ee)}`,style:{width:`${ee}%`}})})]}),e.jsxs("div",{className:"text-center",children:[e.jsxs("p",{className:"text-sm font-semibold text-gray-900",children:["$",s.amount]}),e.jsx("p",{className:"text-xs text-gray-500",children:s.billingCycle})]}),e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsx(T,{className:hs[s.plan],children:s.plan}),e.jsx(T,{className:xs[s.status],children:s.status})]}),e.jsxs(Ke,{children:[e.jsx(Qe,{asChild:!0,children:e.jsx(n,{variant:"ghost",size:"icon",children:e.jsx(Ie,{className:"h-4 w-4"})})}),e.jsxs(We,{align:"end",children:[e.jsx(f,{asChild:!0,children:e.jsxs(L,{to:`/dashboard/subscriptions/${s.id}`,className:"flex items-center w-full",children:[e.jsx(Ue,{className:"mr-2 h-4 w-4"}),"View Details"]})}),e.jsx(f,{asChild:!0,children:e.jsxs(L,{to:`/dashboard/salons/${s.salonId}`,className:"flex items-center w-full",children:[e.jsx(ze,{className:"mr-2 h-4 w-4"}),"View Salon"]})}),s.status==="active"&&e.jsxs(e.Fragment,{children:[e.jsxs(f,{className:"cursor-pointer",onClick:()=>ke(s),children:[e.jsx(le,{className:"mr-2 h-4 w-4"}),"Upgrade Plan"]}),e.jsxs(f,{className:"cursor-pointer",onClick:()=>Me(s),children:[e.jsx(te,{className:"mr-2 h-4 w-4"}),"Downgrade Plan"]})]}),e.jsxs(f,{className:"cursor-pointer",onClick:()=>Ae(s),children:[e.jsx(Re,{className:"mr-2 h-4 w-4"}),"Edit Billing"]}),s.status==="active"&&e.jsxs(f,{className:"text-red-600 cursor-pointer",onClick:()=>De(s),children:[e.jsx(O,{className:"mr-2 h-4 w-4"}),"Cancel Subscription"]})]})]})]})]},s.id)})})})]}),e.jsx(Xe,{open:ge,onOpenChange:F,children:e.jsxs(Ge,{children:[e.jsxs(es,{children:[e.jsx(ss,{children:"Cancel Subscription"}),e.jsxs(as,{children:['Are you sure you want to cancel the subscription for "',l?.salonName,'"? This action will immediately revoke access to premium features and cannot be undone.']})]}),e.jsxs("div",{className:"mt-4",children:[e.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"The salon will lose access to:"}),e.jsxs("ul",{className:"list-disc list-inside space-y-1 text-sm text-gray-600",children:[e.jsx("li",{children:"Advanced booking features"}),e.jsx("li",{children:"Analytics and reporting"}),e.jsx("li",{children:"Priority support"}),e.jsx("li",{children:"Custom branding options"})]})]}),e.jsxs(ls,{children:[e.jsx(ts,{children:"Keep Subscription"}),e.jsx(rs,{onClick:Be,className:"bg-red-600 hover:bg-red-700 text-white",children:"Cancel Subscription"})]})]})}),e.jsx(Y,{open:ue,onOpenChange:D,children:e.jsxs(I,{className:"max-w-2xl",children:[e.jsxs(U,{children:[e.jsx(z,{children:"Upgrade Subscription Plan"}),e.jsxs(R,{children:['Choose a higher tier plan for "',l?.salonName,'"']})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"p-4 bg-blue-50 rounded-lg",children:e.jsxs("p",{className:"text-sm text-blue-800",children:[e.jsx("strong",{children:"Current Plan:"})," ",l?.plan," - $",l?.amount,"/month"]})}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:l&&J(l?.plan).map(s=>{const a=$[s.name],t=i?.id===s.id;return e.jsxs("div",{onClick:()=>A(s),className:`p-4 rounded-lg border-2 cursor-pointer transition-all ${t?"border-purple-200 bg-purple-50":"border-gray-200 hover:border-gray-300"}`,children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx("div",{className:`p-2 rounded-lg bg-gradient-to-r ${s.name==="Standard"?"from-blue-600 to-blue-700":"from-purple-600 to-purple-700"}`,children:a?e.jsx(a,{className:"h-5 w-5 text-white"}):e.jsx("span",{className:"h-5 w-5",children:"?"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-gray-900",children:s.name}),e.jsxs("p",{className:"text-lg font-semibold text-gray-900",children:["$",s.price,"/month"]})]})]}),e.jsx("p",{className:"text-sm text-gray-600 mb-3",children:s.description}),e.jsx("ul",{className:"space-y-1",children:s.features.slice(0,4).map((c,p)=>e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx(w,{className:"h-3 w-3 text-green-500"}),e.jsx("span",{className:"text-xs text-gray-700",children:c})]},p))})]},s.id)})}),l&&J(l?.plan).length===0&&e.jsxs("div",{className:"text-center py-8 text-gray-500",children:[e.jsx(ie,{className:"h-12 w-12 mx-auto mb-4 text-gray-300"}),e.jsx("p",{children:"Already on the highest plan"}),e.jsx("p",{className:"text-sm",children:"This subscription is already on the Premium plan."})]})]}),e.jsxs(V,{children:[e.jsx(n,{variant:"outline",onClick:()=>D(!1),children:"Cancel"}),e.jsxs(n,{onClick:we,disabled:!i,className:"bg-green-600 hover:bg-green-700 text-white",children:[e.jsx(le,{className:"h-4 w-4 mr-2"}),"Upgrade Plan"]})]})]})}),e.jsx(Y,{open:je,onOpenChange:k,children:e.jsxs(I,{className:"max-w-2xl",children:[e.jsxs(U,{children:[e.jsx(z,{children:"Downgrade Subscription Plan"}),e.jsxs(R,{children:['Choose a lower tier plan for "',l?.salonName,'"']})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"p-4 bg-yellow-50 rounded-lg",children:[e.jsxs("p",{className:"text-sm text-yellow-800",children:[e.jsx("strong",{children:"Current Plan:"})," ",l?.plan," - $",l?.amount,"/month"]}),e.jsx("p",{className:"text-xs text-yellow-700 mt-1",children:"Downgrading will reduce available features and limits."})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:l&&K(l?.plan).map(s=>{const a=$[s.name],t=i?.id===s.id;return e.jsxs("div",{onClick:()=>A(s),className:`p-4 rounded-lg border-2 cursor-pointer transition-all ${t?"border-orange-200 bg-orange-50":"border-gray-200 hover:border-gray-300"}`,children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx("div",{className:`p-2 rounded-lg bg-gradient-to-r ${s.name==="Basic"?"from-gray-600 to-gray-700":"from-blue-600 to-blue-700"}`,children:a?e.jsx(a,{className:"h-5 w-5 text-white"}):e.jsx("span",{className:"h-5 w-5",children:"?"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-gray-900",children:s.name}),e.jsxs("p",{className:"text-lg font-semibold text-gray-900",children:["$",s.price,"/month"]})]})]}),e.jsx("p",{className:"text-sm text-gray-600 mb-3",children:s.description}),e.jsx("ul",{className:"space-y-1",children:s.features.slice(0,4).map((c,p)=>e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx(w,{className:"h-3 w-3 text-green-500"}),e.jsx("span",{className:"text-xs text-gray-700",children:c})]},p))})]},s.id)})}),l&&K(l?.plan).length===0&&e.jsxs("div",{className:"text-center py-8 text-gray-500",children:[e.jsx(ce,{className:"h-12 w-12 mx-auto mb-4 text-gray-300"}),e.jsx("p",{children:"Already on the lowest plan"}),e.jsx("p",{className:"text-sm",children:"This subscription is already on the Basic plan."})]})]}),e.jsxs(V,{children:[e.jsx(n,{variant:"outline",onClick:()=>k(!1),children:"Cancel"}),e.jsxs(n,{onClick:Ce,disabled:!i,className:"bg-orange-600 hover:bg-orange-700 text-black font-semibold",children:[e.jsx(te,{className:"h-4 w-4 mr-2"}),"Downgrade Plan"]})]})]})}),e.jsx(Y,{open:Ne,onOpenChange:M,children:e.jsxs(I,{className:"max-w-md",children:[e.jsxs(U,{children:[e.jsx(z,{children:"Edit Payment Method"}),e.jsxs(R,{children:['Update the payment method for "',l?.salonName,'"']})]}),e.jsxs("div",{className:"space-y-4",children:[l?.paymentMethod&&e.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg",children:[e.jsxs("p",{className:"text-sm text-gray-800",children:[e.jsx("strong",{children:"Current:"})," ",l.paymentMethod.brand," ending in ",l.paymentMethod.last4]}),e.jsxs("p",{className:"text-xs text-gray-600",children:["Expires ",l.paymentMethod.expiryMonth,"/",l.paymentMethod.expiryYear]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(C,{htmlFor:"cardholderName",children:"Cardholder Name"}),e.jsx(y,{id:"cardholderName",placeholder:"John Doe",value:o.cardholderName,onChange:s=>N(a=>({...a,cardholderName:s.target.value}))})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(C,{htmlFor:"cardNumber",children:"Card Number"}),e.jsx(y,{id:"cardNumber",placeholder:"1234 5678 9012 3456",value:o.cardNumber,onChange:s=>N(a=>({...a,cardNumber:s.target.value}))})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(C,{htmlFor:"expiryMonth",children:"Month"}),e.jsx(y,{id:"expiryMonth",placeholder:"MM",value:o.expiryMonth,onChange:s=>N(a=>({...a,expiryMonth:s.target.value}))})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(C,{htmlFor:"expiryYear",children:"Year"}),e.jsx(y,{id:"expiryYear",placeholder:"YYYY",value:o.expiryYear,onChange:s=>N(a=>({...a,expiryYear:s.target.value}))})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(C,{htmlFor:"cvv",children:"CVV"}),e.jsx(y,{id:"cvv",placeholder:"123",value:o.cvv,onChange:s=>N(a=>({...a,cvv:s.target.value}))})]})]})]})]}),e.jsxs(V,{children:[e.jsx(n,{variant:"outline",onClick:()=>M(!1),children:"Cancel"}),e.jsxs(n,{onClick:Se,disabled:!o.cardNumber||!o.cardholderName,className:"bg-blue-600 hover:bg-blue-700 text-white",children:[e.jsx(se,{className:"h-4 w-4 mr-2"}),"Update Payment Method"]})]})]})})]})}export{Cs as default};
