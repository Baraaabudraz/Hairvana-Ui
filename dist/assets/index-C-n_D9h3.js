import{j as e,Q as w,y as b,W as C,Y as k,$ as S}from"./ui-vendor-B2pFoMNi.js";import{a as t,u as P,L as E}from"./react-vendor-C7H4r9IR.js";import{u as D,h as L,B as i,C as M,b as A,I as T,d as z,D as B,i as I,j as $,k as u}from"./index-DHCScZ-8.js";import{B as F}from"./badge-C_Aht46l.js";import{f as Y,g as _}from"./subscriptions-Dpt9SgIW.js";import"./db-vendor-BXl3LOEh.js";import"./data-vendor-CIeUuS6O.js";import"./charts-vendor-BwF8VYvl.js";const q={active:"bg-green-100 text-green-800",inactive:"bg-gray-100 text-gray-800"};function U(){const[c,d]=t.useState([]),[g,o]=t.useState(!0),[x,m]=t.useState(""),[l,f]=t.useState(""),[a,n]=t.useState("all"),j=P();D(s=>s.token);const{toast:h}=L(),y=async()=>{o(!0),m("");try{const s=await Y();d(s)}catch(s){m(s.message||"Error fetching plans")}finally{o(!1)}};t.useEffect(()=>{y()},[]);const N=async s=>{if(confirm("Are you sure you want to delete this plan?"))try{await _(s),d(c.filter(r=>r.id!==s)),h({title:"Plan deleted",description:"The plan has been removed."})}catch(r){h({title:"Error",description:r.message||"Error deleting plan",variant:"destructive"})}},p=c.filter(s=>{const r=s.name.toLowerCase().includes(l.toLowerCase())||s.description.toLowerCase().includes(l.toLowerCase()),v=a==="all"||s.status===a;return r&&v});return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center flex-wrap gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Plan Management"}),e.jsx("p",{className:"text-gray-600",children:"Manage all subscription plans for your platform"})]}),e.jsx(E,{to:"/dashboard/plans/new",children:e.jsxs(i,{className:"bg-gradient-to-r from-purple-600 to-pink-600 hover:from-purple-700 hover:to-pink-700",children:[e.jsx(w,{className:"h-4 w-4 mr-2"}),"Add New Plan"]})})]}),e.jsxs(M,{className:"border-0 shadow-sm",children:[e.jsx(A,{children:e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-between",children:[e.jsxs("div",{className:"relative flex-1 max-w-md",children:[e.jsx(b,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx(T,{placeholder:"Search plans...",value:l,onChange:s=>f(s.target.value),className:"pl-10"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(i,{variant:a==="all"?"default":"outline",onClick:()=>n("all"),size:"sm",children:"All"}),e.jsx(i,{variant:a==="active"?"default":"outline",onClick:()=>n("active"),size:"sm",children:"Active"}),e.jsx(i,{variant:a==="inactive"?"default":"outline",onClick:()=>n("inactive"),size:"sm",children:"Inactive"})]})]})}),e.jsx(z,{children:g?e.jsx("div",{className:"min-h-[200px] flex items-center justify-center",children:e.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-b-2 border-purple-600"})}):x?e.jsx("div",{className:"py-8 text-center text-red-600",children:x}):p.length===0?e.jsx("div",{className:"py-8 text-center text-gray-500",children:"No plans found."}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200 bg-white rounded-lg shadow-sm",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider",children:"Name"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider",children:"Description"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider",children:"Monthly Price"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider",children:"Yearly Price"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider",children:"Billing Period"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-100",children:p.map(s=>e.jsxs("tr",{className:"hover:bg-gray-50 transition",children:[e.jsx("td",{className:"px-4 py-3 font-medium text-gray-900",children:s.name}),e.jsx("td",{className:"px-4 py-3 text-gray-700 max-w-xs truncate",children:s.description}),e.jsxs("td",{className:"px-4 py-3 text-gray-700",children:["$",s.price]}),e.jsxs("td",{className:"px-4 py-3 text-gray-700",children:["$",s.yearly_price]}),e.jsx("td",{className:"px-4 py-3 text-gray-700 capitalize",children:s.billing_period}),e.jsx("td",{className:"px-4 py-3",children:e.jsx(F,{className:q[s.status]+" font-semibold",children:s.status})}),e.jsx("td",{className:"px-4 py-3",children:e.jsxs(B,{children:[e.jsx(I,{asChild:!0,children:e.jsx(i,{variant:"ghost",size:"icon",className:"h-8 w-8",children:e.jsx(C,{className:"w-4 h-4"})})}),e.jsxs($,{align:"end",children:[e.jsxs(u,{onClick:()=>j(`/dashboard/plans/${s.id}/edit`),children:[e.jsx(k,{className:"w-4 h-4 mr-2"})," Edit"]}),e.jsxs(u,{onClick:()=>N(s.id),className:"text-red-600",children:[e.jsx(S,{className:"w-4 h-4 mr-2"})," Delete"]})]})]})})]},s.id))})]})})})]})]})}export{U as default};
