import{j as e,B as b,U as v,C as N,O as w}from"./ui-vendor-B2pFoMNi.js";import{a as r}from"./react-vendor-C7H4r9IR.js";import{a as S,C as n,b as o,c,d as l,e as h,A as p,f as u,g as j,u as T}from"./index-DyoA978M.js";import{f as C}from"./analytics-BSSJJxsB.js";import{R,L as D,C as L,X as k,Y as A,T as E,a as H,f as B}from"./charts-vendor-BwF8VYvl.js";import{B as f}from"./badge-DN3GUanR.js";import{f as U}from"./salons-B0SwCEqs.js";import"./db-vendor-BXl3LOEh.js";import"./data-vendor-CIeUuS6O.js";async function G(){try{return await S("/dashboard/stats")}catch(t){throw console.error("Error fetching dashboard stats:",t),t}}function F(){const[t,d]=r.useState(null),[x,i]=r.useState(!0),[s,a]=r.useState(!1);return r.useEffect(()=>{(async()=>{try{i(!0),a(!1);const g=await G();d(g)}catch(g){console.error("Error loading dashboard stats:",g),a(!0),d(null)}finally{i(!1)}})()},[]),x?e.jsx("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-2 lg:grid-cols-4",children:[1,2,3,4].map(m=>e.jsxs(n,{className:"border-0 shadow-sm bg-white",children:[e.jsxs(o,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(c,{className:"text-sm font-medium text-gray-600",children:"Loading..."}),e.jsx("div",{className:"h-4 w-4 bg-gray-200 rounded animate-pulse"})]}),e.jsxs(l,{children:[e.jsx("div",{className:"h-6 w-24 bg-gray-200 rounded animate-pulse mb-1"}),e.jsx("div",{className:"h-4 w-32 bg-gray-100 rounded animate-pulse"})]})]},m))}):s||!t?e.jsx("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-2 lg:grid-cols-4",children:e.jsx(n,{className:"border-0 shadow-sm bg-white col-span-full",children:e.jsx(l,{className:"p-6 text-center",children:e.jsx("p",{className:"text-gray-500",children:"Could not load statistics from the server"})})})}):e.jsxs("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-2 lg:grid-cols-4",children:[e.jsxs(n,{className:"border-0 shadow-sm bg-white",children:[e.jsxs(o,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(c,{className:"text-sm font-medium text-gray-600",children:"Total Salons"}),e.jsx(b,{className:"h-4 w-4 text-gray-400"})]}),e.jsx(l,{children:e.jsx("div",{className:"text-2xl font-bold text-gray-900",children:t.totalSalons.toLocaleString()})})]}),e.jsxs(n,{className:"border-0 shadow-sm bg-white",children:[e.jsxs(o,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(c,{className:"text-sm font-medium text-gray-600",children:"Active Users"}),e.jsx(v,{className:"h-4 w-4 text-gray-400"})]}),e.jsx(l,{children:e.jsx("div",{className:"text-2xl font-bold text-gray-900",children:t.activeUsers.toLocaleString()})})]}),e.jsxs(n,{className:"border-0 shadow-sm bg-white",children:[e.jsxs(o,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(c,{className:"text-sm font-medium text-gray-600",children:"Monthly Revenue"}),e.jsx(N,{className:"h-4 w-4 text-gray-400"})]}),e.jsx(l,{children:e.jsxs("div",{className:"text-2xl font-bold text-gray-900",children:["$",t.totalRevenue.toLocaleString()]})})]}),e.jsxs(n,{className:"border-0 shadow-sm bg-white",children:[e.jsxs(o,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(c,{className:"text-sm font-medium text-gray-600",children:"Total Bookings"}),e.jsx(w,{className:"h-4 w-4 text-gray-400"})]}),e.jsx(l,{children:e.jsx("div",{className:"text-2xl font-bold text-gray-900",children:t.totalBookings.toLocaleString()})})]})]})}function P(){const[t,d]=r.useState([]),[x,i]=r.useState(!0);return r.useEffect(()=>{(async()=>{try{i(!0);const a=await C("30d");d(a.revenue.data||[])}catch(a){console.error("Error loading revenue data:",a)}finally{i(!1)}})()},[]),x?e.jsxs(n,{className:"border-0 shadow-sm",children:[e.jsxs(o,{children:[e.jsx(c,{children:"Revenue Trend"}),e.jsx(h,{children:"Monthly revenue over the last 6 months"})]}),e.jsx(l,{children:e.jsx("div",{className:"h-[300px] flex items-center justify-center",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-purple-600"})})})]}):!t||t.length===0?e.jsxs(n,{className:"border-0 shadow-sm",children:[e.jsxs(o,{children:[e.jsx(c,{children:"Revenue Trend"}),e.jsx(h,{children:"Monthly revenue over the last 6 months"})]}),e.jsx(l,{children:e.jsx("div",{className:"h-[300px] flex items-center justify-center",children:e.jsx("p",{className:"text-gray-500",children:"No revenue data available"})})})]}):e.jsxs(n,{className:"border-0 shadow-sm",children:[e.jsxs(o,{children:[e.jsx(c,{children:"Revenue Trend"}),e.jsx(h,{children:"Monthly revenue over the last 6 months"})]}),e.jsx(l,{children:e.jsx(R,{width:"100%",height:300,children:e.jsxs(D,{data:t,children:[e.jsx(L,{strokeDasharray:"3 3",className:"stroke-gray-200"}),e.jsx(k,{dataKey:"month",className:"text-gray-600",fontSize:12}),e.jsx(A,{className:"text-gray-600",fontSize:12,tickFormatter:s=>`$${s/1e3}k`}),e.jsx(E,{formatter:s=>[`$${s.toLocaleString()}`,"Revenue"],labelStyle:{color:"#374151"},contentStyle:{backgroundColor:"white",border:"1px solid #e5e7eb",borderRadius:"8px"}}),e.jsx(H,{type:"monotone",dataKey:"revenue",stroke:"url(#gradient)",strokeWidth:3,dot:{fill:"#8b5cf6",strokeWidth:2,r:4},activeDot:{r:6,fill:"#8b5cf6"}}),e.jsx("defs",{children:e.jsxs("linearGradient",{id:"gradient",x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[e.jsx("stop",{offset:"0%",stopColor:"#8b5cf6"}),e.jsx("stop",{offset:"100%",stopColor:"#ec4899"})]})})]})})})]})}const M={pending:"bg-yellow-100 text-yellow-800",urgent:"bg-red-100 text-red-800",success:"bg-green-100 text-green-800"},$=t=>{try{return B(t,{addSuffix:!0})}catch{return"recently"}};function W(){const[t,d]=r.useState([]),[x,i]=r.useState(!0);return r.useEffect(()=>{(async()=>{try{i(!0);const a=new Date,m=[{id:1,type:"salon_registration",title:"New salon registered",description:"Bella Hair Studio submitted registration",user:"Bella Hair Studio",avatar:"https://images.pexels.com/photos/3993449/pexels-photo-3993449.jpeg?auto=compress&cs=tinysrgb&w=40&h=40&dpr=2",timestamp:new Date(a.getTime()-30*60*1e3),status:"pending"},{id:2,type:"user_report",title:"User reported salon",description:"Sarah Johnson reported inappropriate behavior",user:"Sarah Johnson",avatar:"https://images.pexels.com/photos/774909/pexels-photo-774909.jpeg?auto=compress&cs=tinysrgb&w=40&h=40&dpr=2",timestamp:new Date(a.getTime()-2*60*60*1e3),status:"urgent"},{id:3,type:"subscription",title:"Subscription upgraded",description:"Urban Cuts upgraded to Premium plan",user:"Urban Cuts",avatar:"https://images.pexels.com/photos/3992656/pexels-photo-3992656.jpeg?auto=compress&cs=tinysrgb&w=40&h=40&dpr=2",timestamp:new Date(a.getTime()-4*60*60*1e3),status:"success"},{id:4,type:"payment",title:"Payment processed",description:"Monthly subscription payment received",user:"Style & Grace",avatar:"https://images.pexels.com/photos/3993456/pexels-photo-3993456.jpeg?auto=compress&cs=tinysrgb&w=40&h=40&dpr=2",timestamp:new Date(a.getTime()-6*60*60*1e3),status:"success"},{id:5,type:"salon_approval",title:"Salon approved",description:"The Hair Lounge has been approved and activated",user:"The Hair Lounge",avatar:"https://images.pexels.com/photos/3992660/pexels-photo-3992660.jpeg?auto=compress&cs=tinysrgb&w=40&h=40&dpr=2",timestamp:new Date(a.getTime()-8*60*60*1e3),status:"success"}];d(m)}catch(a){console.error("Error loading recent activity:",a)}finally{i(!1)}})()},[]),x?e.jsxs(n,{className:"border-0 shadow-sm",children:[e.jsxs(o,{children:[e.jsx(c,{children:"Recent Activity"}),e.jsx(h,{children:"Latest platform activities and notifications"})]}),e.jsx(l,{children:e.jsx("div",{className:"space-y-4",children:[1,2,3,4,5].map(s=>e.jsxs("div",{className:"flex items-start space-x-4 p-4 rounded-lg bg-gray-50 animate-pulse",children:[e.jsx("div",{className:"h-10 w-10 rounded-full bg-gray-300"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"h-4 w-32 bg-gray-300 rounded mb-2"}),e.jsx("div",{className:"h-3 w-48 bg-gray-200 rounded mb-2"}),e.jsx("div",{className:"h-3 w-24 bg-gray-200 rounded"})]}),e.jsx("div",{className:"h-6 w-16 bg-gray-300 rounded"})]},s))})})]}):e.jsxs(n,{className:"border-0 shadow-sm",children:[e.jsxs(o,{children:[e.jsx(c,{children:"Recent Activity"}),e.jsx(h,{children:"Latest platform activities and notifications"})]}),e.jsx(l,{children:e.jsx("div",{className:"space-y-4",children:t.map(s=>e.jsxs("div",{className:"flex items-start space-x-4 p-4 rounded-lg bg-gray-50 hover:bg-gray-100 transition-colors",children:[e.jsxs(p,{className:"h-10 w-10",children:[e.jsx(u,{src:s.avatar,alt:s.user}),e.jsx(j,{children:s.user.split(" ").map(a=>a[0]).join("")})]}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:s.title}),e.jsx(f,{className:M[s.status],children:s.status})]}),e.jsx("p",{className:"text-sm text-gray-600",children:s.description}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:$(s.timestamp)})]})]},s.id))})})]})}function _(){const[t,d]=r.useState([]),[x,i]=r.useState(!0);return r.useEffect(()=>{(async()=>{try{i(!0);const m=[...(await U({status:"active"})).salons].sort((g,y)=>parseFloat(String(y.revenue).replace(/[^0-9.-]+/g,""))-parseFloat(String(g.revenue).replace(/[^0-9.-]+/g,""))).slice(0,4);d(m)}catch(a){console.error("Error loading top salons:",a)}finally{i(!1)}})()},[]),x?e.jsxs(n,{className:"border-0 shadow-sm",children:[e.jsxs(o,{children:[e.jsx(c,{children:"Top Performing Salons"}),e.jsx(h,{children:"Highest revenue salons this month"})]}),e.jsx(l,{children:e.jsx("div",{className:"space-y-4",children:[1,2,3,4].map(s=>e.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg bg-gray-50 animate-pulse",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-6 h-6 rounded-full bg-gray-300"}),e.jsx("div",{className:"h-10 w-10 rounded-full bg-gray-300"}),e.jsxs("div",{children:[e.jsx("div",{className:"h-4 w-24 bg-gray-300 rounded mb-2"}),e.jsx("div",{className:"h-3 w-16 bg-gray-200 rounded"})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"h-4 w-16 bg-gray-300 rounded mb-2"}),e.jsx("div",{className:"h-3 w-20 bg-gray-200 rounded"})]})]},s))})})]}):!t||t.length===0?e.jsxs(n,{className:"border-0 shadow-sm",children:[e.jsxs(o,{children:[e.jsx(c,{children:"Top Performing Salons"}),e.jsx(h,{children:"Highest revenue salons this month"})]}),e.jsx(l,{children:e.jsx("div",{className:"text-center py-8",children:e.jsx("p",{className:"text-gray-500",children:"No salon data available"})})})]}):e.jsxs(n,{className:"border-0 shadow-sm",children:[e.jsxs(o,{children:[e.jsx(c,{children:"Top Performing Salons"}),e.jsx(h,{children:"Highest revenue salons this month"})]}),e.jsx(l,{children:e.jsx("div",{className:"space-y-4",children:t.map((s,a)=>e.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg bg-gray-50",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"flex items-center justify-center w-6 h-6 rounded-full bg-gradient-to-r from-purple-600 to-pink-600 text-white text-xs font-bold",children:a+1}),e.jsxs(p,{className:"h-10 w-10",children:[e.jsx(u,{src:s.avatar||"https://images.pexels.com/photos/3993449/pexels-photo-3993449.jpeg?auto=compress&cs=tinysrgb&w=100&h=100&dpr=2",alt:s.name}),e.jsx(j,{children:s.name.split(" ").map(m=>m[0]).join("")})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:s.name}),e.jsx("p",{className:"text-xs text-gray-500",children:s.location})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-sm font-semibold text-gray-900",children:Number.isFinite(Number(s.revenue))?Number(s.revenue).toLocaleString():String(s.revenue)}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(f,{variant:"secondary",className:"text-xs",children:[s.bookings," bookings"]}),e.jsxs("span",{className:"text-xs text-yellow-600",children:["★ ",s.rating]})]})]})]},s.id))})})]})}function V(){const{user:t}=T(),[d,x]=r.useState("");return r.useEffect(()=>{const i=new Date().getHours();i<12?x("Good morning"):i<18?x("Good afternoon"):x("Good evening")},[]),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Dashboard Overview"}),e.jsxs("p",{className:"text-gray-600",children:[d,", ",t?.name||"Welcome back","! Here's what's happening with your platform."]})]}),e.jsx(F,{}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsx(P,{}),e.jsx(_,{})]}),e.jsx(W,{})]})}export{V as default};
