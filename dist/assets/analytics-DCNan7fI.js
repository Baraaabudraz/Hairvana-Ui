import{j as e,af as _,al as G,a4 as W,B as X,U as M,a3 as Y,ad as q,a2 as H,a1 as Q,e as J,d as Z,av as ee,aw as se}from"./ui-vendor-B2pFoMNi.js";import{a as x}from"./react-vendor-C7H4r9IR.js";import{B as m,C as l,d as n,b as i,c as o,e as c}from"./index-DyoA978M.js";import{B as g}from"./badge-DN3GUanR.js";import{S as ae,a as te,b as re,c as le,d as j}from"./select-_2QWMkjB.js";import{f as ne}from"./analytics-BSSJJxsB.js";import{r as ie}from"./file-vendor-3AyqgMbt.js";import{R as v,c as K,C as f,X as N,Y as b,T as y,d as w,B as p,a as z,A as oe,e as $}from"./charts-vendor-BwF8VYvl.js";import"./db-vendor-BXl3LOEh.js";import"./data-vendor-CIeUuS6O.js";var ce=ie();function ye(){const[a,F]=x.useState(null),[I,k]=x.useState(!0),[u,O]=x.useState("30d"),[de,xe]=x.useState("revenue");x.useEffect(()=>{S()},[u]);const S=async()=>{try{k(!0);const s=await ne(u);F(s)}catch(s){console.error("Error fetching analytics:",s)}finally{k(!1)}},h=s=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:0,maximumFractionDigits:0}).format(s),R=s=>`${s>0?"+":""}${s.toFixed(1)}%`,C=s=>s>0?e.jsx(ee,{className:"h-4 w-4 text-green-500"}):e.jsx(se,{className:"h-4 w-4 text-red-500"}),U=s=>s>0?"text-green-600":"text-red-600",P=()=>{if(!a)return;const s=new ce.Workbook;s.addWorksheet("Overview").addRow(["Total Salons",a.overview.totalSalons,"Active Salons",a.overview.activeSalons,"Total Users",a.overview.totalUsers,"Active Users",a.overview.activeUsers,"Total Bookings",a.overview.totalBookings,"Completed Bookings",a.overview.completedBookings,"Total Revenue",a.overview.totalRevenue,"Monthly Growth (%)",a.overview.monthlyGrowth]);const B=s.addWorksheet("Revenue");B.addRow(["Month","Revenue","Subscriptions","Commissions"]),a.revenue.data?.forEach(t=>{B.addRow([t.month,t.revenue,t.subscriptions,t.commissions])});const D=s.addWorksheet("Bookings");D.addRow(["Date","Total Bookings","Completed","Cancelled"]),a.bookings.data?.forEach(t=>{D.addRow([t.date,t.bookings,t.completed,t.cancelled])});const A=s.addWorksheet("User Growth");A.addRow(["Month","New Users","Returning Users","Total Users"]),a.userGrowth.data?.forEach(t=>{A.addRow([t.month,t.newUsers,t.returningUsers,t.totalUsers])});const L=s.addWorksheet("Top Services");L.addRow(["Service Name","Bookings","Revenue","Growth"]),a.topServices?.forEach(t=>{L.addRow([t.name,t.bookings,t.revenue,t.growth])});const T=s.addWorksheet("Geographic");T.addRow(["Location","Salons","Users","Revenue"]),a.geographicData?.forEach(t=>{T.addRow([t.location,t.salons,t.users,t.revenue])}),s.xlsx.writeBuffer().then(t=>{const V=new Blob([t],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}),E=URL.createObjectURL(V),d=document.createElement("a");d.href=E,d.download="analytics_export.xlsx",document.body.appendChild(d),d.click(),document.body.removeChild(d),URL.revokeObjectURL(E)})};return I?e.jsx("div",{className:"min-h-screen flex items-center justify-center",children:e.jsx("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-purple-600"})}):a?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Analytics Dashboard"}),e.jsx("p",{className:"text-gray-600",children:"Comprehensive insights into platform performance and trends"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(ae,{value:u,onValueChange:O,children:[e.jsx(te,{className:"w-32",children:e.jsx(re,{})}),e.jsxs(le,{children:[e.jsx(j,{value:"7d",children:"Last 7 days"}),e.jsx(j,{value:"30d",children:"Last 30 days"}),e.jsx(j,{value:"90d",children:"Last 90 days"}),e.jsx(j,{value:"1y",children:"Last year"})]})]}),e.jsxs(m,{variant:"outline",onClick:S,children:[e.jsx(_,{className:"h-4 w-4 mr-2"}),"Refresh"]}),e.jsxs(m,{variant:"outline",onClick:P,children:[e.jsx(G,{className:"h-4 w-4 mr-2"}),"Export"]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsx(l,{className:"border-0 shadow-sm",children:e.jsx(n,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Revenue"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:h(a.overview.totalRevenue)}),e.jsxs("div",{className:"flex items-center gap-1 mt-1",children:[C(a.overview.monthlyGrowth),e.jsx("span",{className:`text-sm font-medium ${U(a.overview.monthlyGrowth)}`,children:R(a.overview.monthlyGrowth)}),e.jsx("span",{className:"text-xs text-gray-500",children:"vs last month"})]})]}),e.jsx("div",{className:"p-3 bg-green-100 rounded-lg",children:e.jsx(W,{className:"h-6 w-6 text-green-600"})})]})})}),e.jsx(l,{className:"border-0 shadow-sm",children:e.jsx(n,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Active Salons"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:a.overview.activeSalons.toLocaleString()}),e.jsx("div",{className:"flex items-center gap-1 mt-1",children:e.jsxs("span",{className:"text-xs text-gray-500",children:[a.overview.totalSalons," total registered"]})})]}),e.jsx("div",{className:"p-3 bg-blue-100 rounded-lg",children:e.jsx(X,{className:"h-6 w-6 text-blue-600"})})]})})}),e.jsx(l,{className:"border-0 shadow-sm",children:e.jsx(n,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Active Users"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:a.overview.activeUsers.toLocaleString()}),e.jsx("div",{className:"flex items-center gap-1 mt-1",children:e.jsxs("span",{className:"text-xs text-gray-500",children:[a.overview.totalUsers," total users"]})})]}),e.jsx("div",{className:"p-3 bg-purple-100 rounded-lg",children:e.jsx(M,{className:"h-6 w-6 text-purple-600"})})]})})}),e.jsx(l,{className:"border-0 shadow-sm",children:e.jsx(n,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Bookings"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:a.overview.totalBookings.toLocaleString()}),e.jsx("div",{className:"flex items-center gap-1 mt-1",children:e.jsxs("span",{className:"text-xs text-gray-500",children:[a.overview.completedBookings," completed"]})})]}),e.jsx("div",{className:"p-3 bg-orange-100 rounded-lg",children:e.jsx(Y,{className:"h-6 w-6 text-orange-600"})})]})})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs(l,{className:"border-0 shadow-sm",children:[e.jsxs(i,{children:[e.jsx(o,{children:"Revenue Trend"}),e.jsx(c,{children:"Monthly revenue breakdown including subscriptions and commissions"})]}),e.jsx(n,{children:e.jsx(v,{width:"100%",height:300,children:e.jsxs(K,{data:a.revenue.data,children:[e.jsx(f,{strokeDasharray:"3 3",className:"stroke-gray-200"}),e.jsx(N,{dataKey:"month",className:"text-gray-600",fontSize:12}),e.jsx(b,{className:"text-gray-600",fontSize:12,tickFormatter:s=>`$${s/1e3}k`}),e.jsx(y,{formatter:(s,r)=>[`$${s.toLocaleString()}`,r==="revenue"?"Total Revenue":r==="subscriptions"?"Subscriptions":"Commissions"],labelStyle:{color:"#374151"},contentStyle:{backgroundColor:"white",border:"1px solid #e5e7eb",borderRadius:"8px"}}),e.jsx(w,{}),e.jsx(p,{dataKey:"subscriptions",fill:"#8b5cf6",name:"Subscriptions"}),e.jsx(p,{dataKey:"commissions",fill:"#ec4899",name:"Commissions"}),e.jsx(z,{type:"monotone",dataKey:"revenue",stroke:"#06b6d4",strokeWidth:3,name:"Total Revenue"})]})})})]}),e.jsxs(l,{className:"border-0 shadow-sm",children:[e.jsxs(i,{children:[e.jsx(o,{children:"User Growth"}),e.jsx(c,{children:"New vs returning users over time"})]}),e.jsx(n,{children:e.jsx(v,{width:"100%",height:300,children:e.jsxs(oe,{data:a.userGrowth.data,children:[e.jsx(f,{strokeDasharray:"3 3",className:"stroke-gray-200"}),e.jsx(N,{dataKey:"month",className:"text-gray-600",fontSize:12}),e.jsx(b,{className:"text-gray-600",fontSize:12}),e.jsx(y,{formatter:(s,r)=>[s.toLocaleString(),r==="newUsers"?"New Users":r==="returningUsers"?"Returning Users":"Total Users"],labelStyle:{color:"#374151"},contentStyle:{backgroundColor:"white",border:"1px solid #e5e7eb",borderRadius:"8px"}}),e.jsx(w,{}),e.jsx($,{type:"monotone",dataKey:"newUsers",stackId:"1",stroke:"#10b981",fill:"#10b981",fillOpacity:.6,name:"New Users"}),e.jsx($,{type:"monotone",dataKey:"returningUsers",stackId:"1",stroke:"#8b5cf6",fill:"#8b5cf6",fillOpacity:.6,name:"Returning Users"})]})})})]})]}),e.jsxs(l,{className:"border-0 shadow-sm",children:[e.jsxs(i,{children:[e.jsx(o,{children:"Booking Analytics"}),e.jsx(c,{children:"Daily booking trends and completion rates"})]}),e.jsx(n,{children:e.jsx(v,{width:"100%",height:400,children:e.jsxs(K,{data:a.bookings.data,children:[e.jsx(f,{strokeDasharray:"3 3",className:"stroke-gray-200"}),e.jsx(N,{dataKey:"date",className:"text-gray-600",fontSize:12}),e.jsx(b,{className:"text-gray-600",fontSize:12}),e.jsx(y,{formatter:(s,r)=>[s.toLocaleString(),r==="bookings"?"Total Bookings":r==="completed"?"Completed":"Cancelled"],labelStyle:{color:"#374151"},contentStyle:{backgroundColor:"white",border:"1px solid #e5e7eb",borderRadius:"8px"}}),e.jsx(w,{}),e.jsx(p,{dataKey:"completed",fill:"#10b981",name:"Completed"}),e.jsx(p,{dataKey:"cancelled",fill:"#ef4444",name:"Cancelled"}),e.jsx(z,{type:"monotone",dataKey:"bookings",stroke:"#8b5cf6",strokeWidth:3,name:"Total Bookings"})]})})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs(l,{className:"border-0 shadow-sm",children:[e.jsxs(i,{children:[e.jsx(o,{children:"Performance Metrics"}),e.jsx(c,{children:"Key performance indicators for the platform"})]}),e.jsxs(n,{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 bg-gradient-to-r from-green-50 to-emerald-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-green-100 rounded-lg",children:e.jsx(W,{className:"h-5 w-5 text-green-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Avg. Booking Value"}),e.jsx("p",{className:"text-lg font-bold text-gray-900",children:h(a.performanceMetrics.averageBookingValue)})]})]}),e.jsx(g,{className:"bg-green-100 text-green-800",children:"+12%"})]}),e.jsxs("div",{className:"flex items-center justify-between p-4 bg-gradient-to-r from-blue-50 to-cyan-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:e.jsx(M,{className:"h-5 w-5 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Customer Retention"}),e.jsxs("p",{className:"text-lg font-bold text-gray-900",children:[a.performanceMetrics.customerRetentionRate,"%"]})]})]}),e.jsx(g,{className:"bg-blue-100 text-blue-800",children:"+5%"})]}),e.jsxs("div",{className:"flex items-center justify-between p-4 bg-gradient-to-r from-purple-50 to-pink-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-purple-100 rounded-lg",children:e.jsx(q,{className:"h-5 w-5 text-purple-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Salon Utilization"}),e.jsxs("p",{className:"text-lg font-bold text-gray-900",children:[a.performanceMetrics.salonUtilizationRate,"%"]})]})]}),e.jsx(g,{className:"bg-purple-100 text-purple-800",children:"+8%"})]}),e.jsxs("div",{className:"flex items-center justify-between p-4 bg-gradient-to-r from-yellow-50 to-orange-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-yellow-100 rounded-lg",children:e.jsx(H,{className:"h-5 w-5 text-yellow-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Average Rating"}),e.jsxs("p",{className:"text-lg font-bold text-gray-900",children:[a.performanceMetrics.averageRating,"/5.0"]})]})]}),e.jsx(g,{className:"bg-yellow-100 text-yellow-800",children:"+0.2"})]})]})]}),e.jsxs(l,{className:"border-0 shadow-sm",children:[e.jsxs(i,{children:[e.jsx(o,{children:"Top Services"}),e.jsx(c,{children:"Most popular services by bookings and revenue"})]}),e.jsx(n,{children:e.jsx("div",{className:"space-y-4",children:a.topServices.map((s,r)=>e.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg hover:bg-gray-50 transition-colors",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"flex items-center justify-center w-8 h-8 rounded-full bg-gradient-to-r from-purple-600 to-pink-600 text-white text-sm font-bold",children:r+1}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-gray-900",children:s.name}),e.jsxs("p",{className:"text-sm text-gray-600",children:[s.bookings.toLocaleString()," bookings"]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"font-semibold text-gray-900",children:h(s.revenue)}),e.jsxs("div",{className:"flex items-center gap-1",children:[C(s.growth),e.jsx("span",{className:`text-sm ${U(s.growth)}`,children:R(s.growth)})]})]})]},s.name))})})]})]}),e.jsxs(l,{className:"border-0 shadow-sm",children:[e.jsxs(i,{children:[e.jsx(o,{children:"Geographic Distribution"}),e.jsx(c,{children:"Platform usage and revenue by location"})]}),e.jsx(n,{children:e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:a.geographicData.map(s=>e.jsxs("div",{className:"p-4 border rounded-lg hover:bg-gray-50 transition-colors",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:e.jsx(Q,{className:"h-5 w-5 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-gray-900",children:s.location}),e.jsxs("p",{className:"text-sm text-gray-600",children:[s.salons," salons"]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Users:"}),e.jsx("span",{className:"text-sm font-medium",children:s.users.toLocaleString()})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Revenue:"}),e.jsx("span",{className:"text-sm font-medium",children:h(s.revenue)})]})]})]},s.location))})})]}),e.jsxs(l,{className:"border-0 shadow-sm bg-gradient-to-r from-purple-50 to-pink-50",children:[e.jsxs(i,{children:[e.jsx(o,{children:"Quick Actions"}),e.jsx(c,{children:"Common analytics tasks and reports"})]}),e.jsx(n,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs(m,{variant:"outline",className:"h-auto p-4 flex flex-col items-center gap-2",children:[e.jsx(J,{className:"h-6 w-6 text-purple-600"}),e.jsx("span",{className:"font-medium",children:"Custom Report"}),e.jsx("span",{className:"text-xs text-gray-500",children:"Create detailed reports"})]}),e.jsxs(m,{variant:"outline",className:"h-auto p-4 flex flex-col items-center gap-2",children:[e.jsx(G,{className:"h-6 w-6 text-blue-600"}),e.jsx("span",{className:"font-medium",children:"Export Data"}),e.jsx("span",{className:"text-xs text-gray-500",children:"Download analytics data"})]}),e.jsxs(m,{variant:"outline",className:"h-auto p-4 flex flex-col items-center gap-2",children:[e.jsx(Z,{className:"h-6 w-6 text-green-600"}),e.jsx("span",{className:"font-medium",children:"Live Dashboard"}),e.jsx("span",{className:"text-xs text-gray-500",children:"Real-time monitoring"})]})]})})]})]}):e.jsx("div",{className:"min-h-screen flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"No data available"}),e.jsx("p",{className:"text-gray-600 mt-2",children:"Unable to load analytics data."})]})})}export{ye as default};
